/************************************************************************************
 * This file was auto-generated by CIDEA                           .                *
 * Please do not modify the contents of this file manually.                         *
 ***********************************************************************************/


#include "bsp_i2c.h"

uint8_t cubeAcpCommsBuffer[3];

CUBELIB_Result_t CUBELIB_ReqAcpLoopStateTlm(uint8_t nodeid, CUBELIB_AcpLoopStateTlm_t* acpLoopState)
{
    uint8_t tlmId = 220;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;


    uint8_t enumVal;

    if (acpLoopState == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 3, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    acpLoopState->timeSinceLoopStart = *( (uint16_t*) (tlmBuffer + 0) );

    enumVal = tlmBuffer[2];
    acpLoopState->currentExecutionPoint = (CUBELIB_CUBEACP_t) enumVal;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqCubeACPStateTlm(uint8_t nodeid, CUBELIB_CubeACPStateTlm_t* cubeACPState)
{
    uint8_t tlmId = 135;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (cubeACPState == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    cubeACPState->adcsConfigLoadError = (tlmBuffer[0] & 0x01) >> 0;

    cubeACPState->orbitParamsLoadError = (tlmBuffer[0] & 0x02) >> 1;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqActuatorCmdTlm(uint8_t nodeid, CUBELIB_ActuatorCmdTlm_t* actuatorCmd)
{
    uint8_t tlmId = 192;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (actuatorCmd == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 12, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    actuatorCmd->torquerCmdX = *( (int16_t*) (tlmBuffer + 0) );

    actuatorCmd->torquerCmdY = *( (int16_t*) (tlmBuffer + 2) );

    actuatorCmd->torquerCmdZ = *( (int16_t*) (tlmBuffer + 4) );

    actuatorCmd->speedCmdX = *( (int16_t*) (tlmBuffer + 6) );

    actuatorCmd->speedCmdY = *( (int16_t*) (tlmBuffer + 8) );

    actuatorCmd->speedCmdZ = *( (int16_t*) (tlmBuffer + 10) );

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqAdcsConfigTlm(uint8_t nodeid, CUBELIB_AdcsConfigTlm_t* adcsConfig)
{
    uint8_t tlmId = 206;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    uint8_t rawCss1Scale;
    uint8_t rawCss2Scale;
    uint8_t rawCss3Scale;
    uint8_t rawCss4Scale;
    uint8_t rawCss5Scale;
    uint8_t rawCss6Scale;
    uint8_t rawCss7Scale;
    uint8_t rawCss8Scale;
    uint8_t rawCss9Scale;
    uint8_t rawCss10Scale;
    int16_t rawCam1Angle1;
    int16_t rawCam1Angle2;
    int16_t rawCam1Angle3;
    uint16_t rawCam1BoreX;
    uint16_t rawCam1BoreY;
    int16_t rawCam2Angle1;
    int16_t rawCam2Angle2;
    int16_t rawCam2Angle3;
    uint16_t rawCam2BoreX;
    uint16_t rawCam2BoreY;
    int16_t rawMagmAngle1;
    int16_t rawMagmAngle2;
    int16_t rawMagmAngle3;
    int16_t rawMagmOffset1;
    int16_t rawMagmOffset2;
    int16_t rawMagmOffset3;
    int16_t rawMagmSens11;
    int16_t rawMagmSens22;
    int16_t rawMagmSens33;
    int16_t rawMagmSens12;
    int16_t rawMagmSens13;
    int16_t rawMagmSens21;
    int16_t rawMagmSens23;
    int16_t rawMagmSens31;
    int16_t rawMagmSens32;
    int16_t rawXRateOffset;
    int16_t rawYRateOffset;
    int16_t rawZRateOffset;
    int16_t rawStarAngle1;
    int16_t rawStarAngle2;
    int16_t rawStarAngle3;
    uint8_t rawStarErrorMargin;
    uint16_t rawStarFocal;
    int16_t rawwy_ref;
    I2C_TransferReturn_TypeDef i2cResult;


    uint8_t enumVal;

    if (adcsConfig == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 272, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    enumVal = tlmBuffer[0];
    adcsConfig->magtorq1 = (CUBELIB_CUBEACP_t) enumVal;

    enumVal = tlmBuffer[1];
    adcsConfig->magtorq2 = (CUBELIB_CUBEACP_t) enumVal;

    enumVal = tlmBuffer[2];
    adcsConfig->magtorq3 = (CUBELIB_CUBEACP_t) enumVal;

    enumVal = tlmBuffer[3];
    adcsConfig->rW1Conf = (CUBELIB_CUBEACP_t) enumVal;

    enumVal = tlmBuffer[4];
    adcsConfig->rW2Conf = (CUBELIB_CUBEACP_t) enumVal;

    enumVal = tlmBuffer[5];
    adcsConfig->rW3Conf = (CUBELIB_CUBEACP_t) enumVal;

    enumVal = tlmBuffer[6];
    adcsConfig->rW4Conf = (CUBELIB_CUBEACP_t) enumVal;

    enumVal = tlmBuffer[7];
    adcsConfig->gyro1Conf = (CUBELIB_CUBEACP_t) enumVal;

    enumVal = tlmBuffer[8];
    adcsConfig->gyro2Conf = (CUBELIB_CUBEACP_t) enumVal;

    enumVal = tlmBuffer[9];
    adcsConfig->gyro3Conf = (CUBELIB_CUBEACP_t) enumVal;

    enumVal = tlmBuffer[10];
    adcsConfig->css1Conf = (CUBELIB_CUBEACP_t) enumVal;

    enumVal = tlmBuffer[11];
    adcsConfig->css2Conf = (CUBELIB_CUBEACP_t) enumVal;

    enumVal = tlmBuffer[12];
    adcsConfig->css3Conf = (CUBELIB_CUBEACP_t) enumVal;

    enumVal = tlmBuffer[13];
    adcsConfig->css4Conf = (CUBELIB_CUBEACP_t) enumVal;

    enumVal = tlmBuffer[14];
    adcsConfig->css5Conf = (CUBELIB_CUBEACP_t) enumVal;

    enumVal = tlmBuffer[15];
    adcsConfig->css6Conf = (CUBELIB_CUBEACP_t) enumVal;

    enumVal = tlmBuffer[16];
    adcsConfig->css7Conf = (CUBELIB_CUBEACP_t) enumVal;

    enumVal = tlmBuffer[17];
    adcsConfig->css8Conf = (CUBELIB_CUBEACP_t) enumVal;

    enumVal = tlmBuffer[18];
    adcsConfig->css9Conf = (CUBELIB_CUBEACP_t) enumVal;

    enumVal = tlmBuffer[19];
    adcsConfig->css10Conf = (CUBELIB_CUBEACP_t) enumVal;

    rawCss1Scale = *( (uint8_t*) (tlmBuffer + 20) );
    adcsConfig->css1Scale = rawCss1Scale*0.01;

    rawCss2Scale = *( (uint8_t*) (tlmBuffer + 21) );
    adcsConfig->css2Scale = rawCss2Scale*0.01;

    rawCss3Scale = *( (uint8_t*) (tlmBuffer + 22) );
    adcsConfig->css3Scale = rawCss3Scale*0.01;

    rawCss4Scale = *( (uint8_t*) (tlmBuffer + 23) );
    adcsConfig->css4Scale = rawCss4Scale*0.01;

    rawCss5Scale = *( (uint8_t*) (tlmBuffer + 24) );
    adcsConfig->css5Scale = rawCss5Scale*0.01;

    rawCss6Scale = *( (uint8_t*) (tlmBuffer + 25) );
    adcsConfig->css6Scale = rawCss6Scale*0.01;

    rawCss7Scale = *( (uint8_t*) (tlmBuffer + 26) );
    adcsConfig->css7Scale = rawCss7Scale*0.01;

    rawCss8Scale = *( (uint8_t*) (tlmBuffer + 27) );
    adcsConfig->css8Scale = rawCss8Scale*0.01;

    rawCss9Scale = *( (uint8_t*) (tlmBuffer + 28) );
    adcsConfig->css9Scale = rawCss9Scale*0.01;

    rawCss10Scale = *( (uint8_t*) (tlmBuffer + 29) );
    adcsConfig->css10Scale = rawCss10Scale*0.01;

    adcsConfig->cssMinimum = *( (uint8_t*) (tlmBuffer + 30) );

    rawCam1Angle1 = *( (int16_t*) (tlmBuffer + 31) );
    adcsConfig->cam1Angle1 = rawCam1Angle1*0.01;

    rawCam1Angle2 = *( (int16_t*) (tlmBuffer + 33) );
    adcsConfig->cam1Angle2 = rawCam1Angle2*0.01;

    rawCam1Angle3 = *( (int16_t*) (tlmBuffer + 35) );
    adcsConfig->cam1Angle3 = rawCam1Angle3*0.01;

    adcsConfig->cam1Threshold = *( (uint8_t*) (tlmBuffer + 37) );

    adcsConfig->cam1AutoAdj = (tlmBuffer[38] & 0x01) >> 0;

    adcsConfig->cam1Exposure = *( (uint16_t*) (tlmBuffer + 39) );

    rawCam1BoreX = *( (uint16_t*) (tlmBuffer + 41) );
    adcsConfig->cam1BoreX = rawCam1BoreX*0.01;

    rawCam1BoreY = *( (uint16_t*) (tlmBuffer + 43) );
    adcsConfig->cam1BoreY = rawCam1BoreY*0.01;

    adcsConfig->cam1Shift = (tlmBuffer[45] & 0x01) >> 0;

    rawCam2Angle1 = *( (int16_t*) (tlmBuffer + 46) );
    adcsConfig->cam2Angle1 = rawCam2Angle1*0.01;

    rawCam2Angle2 = *( (int16_t*) (tlmBuffer + 48) );
    adcsConfig->cam2Angle2 = rawCam2Angle2*0.01;

    rawCam2Angle3 = *( (int16_t*) (tlmBuffer + 50) );
    adcsConfig->cam2Angle3 = rawCam2Angle3*0.01;

    adcsConfig->cam2Threshold = *( (uint8_t*) (tlmBuffer + 52) );

    adcsConfig->cam2AutoAdj = (tlmBuffer[53] & 0x01) >> 0;

    adcsConfig->cam2Exposure = *( (uint16_t*) (tlmBuffer + 54) );

    rawCam2BoreX = *( (uint16_t*) (tlmBuffer + 56) );
    adcsConfig->cam2BoreX = rawCam2BoreX*0.01;

    rawCam2BoreY = *( (uint16_t*) (tlmBuffer + 58) );
    adcsConfig->cam2BoreY = rawCam2BoreY*0.01;

    adcsConfig->cam2Shift = (tlmBuffer[60] & 0x01) >> 0;

    adcsConfig->maskArea1Xmin = *( (uint16_t*) (tlmBuffer + 61) );

    adcsConfig->maskArea1Xmax = *( (uint16_t*) (tlmBuffer + 63) );

    adcsConfig->maskArea1Ymin = *( (uint16_t*) (tlmBuffer + 65) );

    adcsConfig->maskArea1Ymax = *( (uint16_t*) (tlmBuffer + 67) );

    adcsConfig->maskArea2Xmin = *( (uint16_t*) (tlmBuffer + 69) );

    adcsConfig->maskArea2Xmax = *( (uint16_t*) (tlmBuffer + 71) );

    adcsConfig->maskArea2Ymin = *( (uint16_t*) (tlmBuffer + 73) );

    adcsConfig->maskArea2Ymax = *( (uint16_t*) (tlmBuffer + 75) );

    adcsConfig->maskArea3Xmin = *( (uint16_t*) (tlmBuffer + 77) );

    adcsConfig->maskArea3Xmax = *( (uint16_t*) (tlmBuffer + 79) );

    adcsConfig->maskArea3Ymin = *( (uint16_t*) (tlmBuffer + 81) );

    adcsConfig->maskArea3Ymax = *( (uint16_t*) (tlmBuffer + 83) );

    adcsConfig->maskArea4Xmin = *( (uint16_t*) (tlmBuffer + 85) );

    adcsConfig->maskArea4Xmax = *( (uint16_t*) (tlmBuffer + 87) );

    adcsConfig->maskArea4Ymin = *( (uint16_t*) (tlmBuffer + 89) );

    adcsConfig->maskArea4Ymax = *( (uint16_t*) (tlmBuffer + 91) );

    adcsConfig->maskArea5Xmin = *( (uint16_t*) (tlmBuffer + 93) );

    adcsConfig->maskArea5Xmax = *( (uint16_t*) (tlmBuffer + 95) );

    adcsConfig->maskArea5Ymin = *( (uint16_t*) (tlmBuffer + 97) );

    adcsConfig->maskArea5Ymax = *( (uint16_t*) (tlmBuffer + 99) );

    rawMagmAngle1 = *( (int16_t*) (tlmBuffer + 101) );
    adcsConfig->magmAngle1 = rawMagmAngle1*0.01;

    rawMagmAngle2 = *( (int16_t*) (tlmBuffer + 103) );
    adcsConfig->magmAngle2 = rawMagmAngle2*0.01;

    rawMagmAngle3 = *( (int16_t*) (tlmBuffer + 105) );
    adcsConfig->magmAngle3 = rawMagmAngle3*0.01;

    rawMagmOffset1 = *( (int16_t*) (tlmBuffer + 107) );
    adcsConfig->magmOffset1 = rawMagmOffset1*0.001;

    rawMagmOffset2 = *( (int16_t*) (tlmBuffer + 109) );
    adcsConfig->magmOffset2 = rawMagmOffset2*0.001;

    rawMagmOffset3 = *( (int16_t*) (tlmBuffer + 111) );
    adcsConfig->magmOffset3 = rawMagmOffset3*0.001;

    rawMagmSens11 = *( (int16_t*) (tlmBuffer + 113) );
    adcsConfig->magmSens11 = rawMagmSens11*0.001;

    rawMagmSens22 = *( (int16_t*) (tlmBuffer + 115) );
    adcsConfig->magmSens22 = rawMagmSens22*0.001;

    rawMagmSens33 = *( (int16_t*) (tlmBuffer + 117) );
    adcsConfig->magmSens33 = rawMagmSens33*0.001;

    rawMagmSens12 = *( (int16_t*) (tlmBuffer + 119) );
    adcsConfig->magmSens12 = rawMagmSens12*0.001;

    rawMagmSens13 = *( (int16_t*) (tlmBuffer + 121) );
    adcsConfig->magmSens13 = rawMagmSens13*0.001;

    rawMagmSens21 = *( (int16_t*) (tlmBuffer + 123) );
    adcsConfig->magmSens21 = rawMagmSens21*0.001;

    rawMagmSens23 = *( (int16_t*) (tlmBuffer + 125) );
    adcsConfig->magmSens23 = rawMagmSens23*0.001;

    rawMagmSens31 = *( (int16_t*) (tlmBuffer + 127) );
    adcsConfig->magmSens31 = rawMagmSens31*0.001;

    rawMagmSens32 = *( (int16_t*) (tlmBuffer + 129) );
    adcsConfig->magmSens32 = rawMagmSens32*0.001;

    rawXRateOffset = *( (int16_t*) (tlmBuffer + 131) );
    adcsConfig->xRateOffset = rawXRateOffset*0.001;

    rawYRateOffset = *( (int16_t*) (tlmBuffer + 133) );
    adcsConfig->yRateOffset = rawYRateOffset*0.001;

    rawZRateOffset = *( (int16_t*) (tlmBuffer + 135) );
    adcsConfig->zRateOffset = rawZRateOffset*0.001;

    adcsConfig->rateSensorMult = *( (uint8_t*) (tlmBuffer + 137) );

    rawStarAngle1 = *( (int16_t*) (tlmBuffer + 138) );
    adcsConfig->starAngle1 = rawStarAngle1*0.01;

    rawStarAngle2 = *( (int16_t*) (tlmBuffer + 140) );
    adcsConfig->starAngle2 = rawStarAngle2*0.01;

    rawStarAngle3 = *( (int16_t*) (tlmBuffer + 142) );
    adcsConfig->starAngle3 = rawStarAngle3*0.01;

    adcsConfig->starExposure = *( (uint16_t*) (tlmBuffer + 144) );

    adcsConfig->detectionThreshold = *( (uint8_t*) (tlmBuffer + 146) );

    adcsConfig->starThreshold = *( (uint8_t*) (tlmBuffer + 147) );

    adcsConfig->maxStarMatched = *( (uint8_t*) (tlmBuffer + 148) );

    adcsConfig->maxStarPixel = *( (uint8_t*) (tlmBuffer + 149) );

    adcsConfig->maxStarNoise = *( (uint8_t*) (tlmBuffer + 150) );

    adcsConfig->minStarPixel = *( (uint8_t*) (tlmBuffer + 151) );

    rawStarErrorMargin = *( (uint8_t*) (tlmBuffer + 152) );
    adcsConfig->starErrorMargin = rawStarErrorMargin*0.01;

    adcsConfig->starCentX = *((float*)(tlmBuffer + 153));

    adcsConfig->starCentY = *((float*)(tlmBuffer + 157));

    rawStarFocal = *( (uint16_t*) (tlmBuffer + 161) );
    adcsConfig->starFocal = rawStarFocal*0.0001;

    adcsConfig->syncDelay = *( (uint8_t*) (tlmBuffer + 163) );

    adcsConfig->ks = *((float*)(tlmBuffer + 164));

    adcsConfig->kd = *((float*)(tlmBuffer + 168));

    rawwy_ref = *( (int16_t*) (tlmBuffer + 172) );
    adcsConfig->wy_ref = rawwy_ref*0.001;

    adcsConfig->kdf = *((float*)(tlmBuffer + 174));

    adcsConfig->kh = *((float*)(tlmBuffer + 178));

    adcsConfig->kn = *((float*)(tlmBuffer + 182));

    adcsConfig->kp1 = *((float*)(tlmBuffer + 186));

    adcsConfig->kd1 = *((float*)(tlmBuffer + 190));

    adcsConfig->h_ref = *((float*)(tlmBuffer + 194));

    adcsConfig->kp2 = *((float*)(tlmBuffer + 198));

    adcsConfig->kd2 = *((float*)(tlmBuffer + 202));

    adcsConfig->kp3 = *((float*)(tlmBuffer + 206));

    adcsConfig->kd3 = *((float*)(tlmBuffer + 210));

    adcsConfig->ki3 = *((float*)(tlmBuffer + 214));

    adcsConfig->ixx = *((float*)(tlmBuffer + 218));

    adcsConfig->iyy = *((float*)(tlmBuffer + 222));

    adcsConfig->izz = *((float*)(tlmBuffer + 226));

    adcsConfig->ixy = *((float*)(tlmBuffer + 230));

    adcsConfig->ixz = *((float*)(tlmBuffer + 234));

    adcsConfig->iyz = *((float*)(tlmBuffer + 238));

    adcsConfig->magRateNoise = *((float*)(tlmBuffer + 242));

    adcsConfig->ekfSysNoise = *((float*)(tlmBuffer + 246));

    adcsConfig->cssNoise = *((float*)(tlmBuffer + 250));

    adcsConfig->sunNoise = *((float*)(tlmBuffer + 254));

    adcsConfig->nadirNoise = *((float*)(tlmBuffer + 258));

    adcsConfig->magNoise = *((float*)(tlmBuffer + 262));

    adcsConfig->starNoise = *((float*)(tlmBuffer + 266));

    adcsConfig->useSunEst = (tlmBuffer[270] & 0x01) >> 0;

    adcsConfig->useNadirEst = (tlmBuffer[270] & 0x02) >> 1;

    adcsConfig->useCssEst = (tlmBuffer[270] & 0x04) >> 2;

    adcsConfig->useStarEst = (tlmBuffer[270] & 0x08) >> 3;

    enumVal = (tlmBuffer[270] >> 4) & 3;
    adcsConfig->magMode = (CUBELIB_CUBEACP_t) enumVal;

    adcsConfig->cam1Cam2Period = *( (uint8_t*) (tlmBuffer + 271) );

    if ((adcsConfig->starCentX < -5000) || (adcsConfig->starCentX > 5000))
        return TlmRangeError;

    if ((adcsConfig->starCentY < -5000) || (adcsConfig->starCentY > 5000))
        return TlmRangeError;

    if ((adcsConfig->ks < 0) || (adcsConfig->ks > 10000))
        return TlmRangeError;

    if ((adcsConfig->kd < 0) || (adcsConfig->kd > 10000))
        return TlmRangeError;

    if ((adcsConfig->wy_ref < -100000) || (adcsConfig->wy_ref > 0))
        return TlmRangeError;

    if ((adcsConfig->kdf < 0) || (adcsConfig->kdf > 100))
        return TlmRangeError;

    if ((adcsConfig->kh < 0) || (adcsConfig->kh > 10000))
        return TlmRangeError;

    if ((adcsConfig->kn < 0) || (adcsConfig->kn > 10000))
        return TlmRangeError;

    if ((adcsConfig->kp1 < 0) || (adcsConfig->kp1 > 100))
        return TlmRangeError;

    if ((adcsConfig->kd1 < 0) || (adcsConfig->kd1 > 100))
        return TlmRangeError;

    if ((adcsConfig->h_ref < -10) || (adcsConfig->h_ref > 0))
        return TlmRangeError;

    if ((adcsConfig->kp2 < 0) || (adcsConfig->kp2 > 100))
        return TlmRangeError;

    if ((adcsConfig->kd2 < 0) || (adcsConfig->kd2 > 100))
        return TlmRangeError;

    if ((adcsConfig->kp3 < 0) || (adcsConfig->kp3 > 100))
        return TlmRangeError;

    if ((adcsConfig->kd3 < 0) || (adcsConfig->kd3 > 100))
        return TlmRangeError;

    if ((adcsConfig->ki3 < 0) || (adcsConfig->ki3 > 100))
        return TlmRangeError;

    if ((adcsConfig->ixx < 0) || (adcsConfig->ixx > 10))
        return TlmRangeError;

    if ((adcsConfig->iyy < 0) || (adcsConfig->iyy > 10))
        return TlmRangeError;

    if ((adcsConfig->izz < 0) || (adcsConfig->izz > 10))
        return TlmRangeError;

    if ((adcsConfig->ixy < -10) || (adcsConfig->ixy > 10))
        return TlmRangeError;

    if ((adcsConfig->ixz < -10) || (adcsConfig->ixz > 10))
        return TlmRangeError;

    if ((adcsConfig->iyz < -10) || (adcsConfig->iyz > 10))
        return TlmRangeError;

    if ((adcsConfig->magRateNoise < 0) || (adcsConfig->magRateNoise > 100))
        return TlmRangeError;

    if ((adcsConfig->ekfSysNoise < 0) || (adcsConfig->ekfSysNoise > 100))
        return TlmRangeError;

    if ((adcsConfig->cssNoise < 0) || (adcsConfig->cssNoise > 100))
        return TlmRangeError;

    if ((adcsConfig->sunNoise < 0) || (adcsConfig->sunNoise > 100))
        return TlmRangeError;

    if ((adcsConfig->nadirNoise < 0) || (adcsConfig->nadirNoise > 100))
        return TlmRangeError;

    if ((adcsConfig->magNoise < 0) || (adcsConfig->magNoise > 100))
        return TlmRangeError;

    if ((adcsConfig->starNoise < 0) || (adcsConfig->starNoise > 100))
        return TlmRangeError;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqAdcsExecTimesTlm(uint8_t nodeid, CUBELIB_AdcsExecTimesTlm_t* adcsExecTimes)
{
    uint8_t tlmId = 196;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (adcsExecTimes == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 8, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    adcsExecTimes->timeAdcsUpdate = *( (uint16_t*) (tlmBuffer + 0) );

    adcsExecTimes->timeSensorActuatorComms = *( (uint16_t*) (tlmBuffer + 2) );

    adcsExecTimes->timeSgp4 = *( (uint16_t*) (tlmBuffer + 4) );

    adcsExecTimes->timeIgrf = *( (uint16_t*) (tlmBuffer + 6) );

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqAdcsMeasureTlm(uint8_t nodeid, CUBELIB_AdcsMeasureTlm_t* adcsMeasure)
{
    uint8_t tlmId = 191;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    int16_t rawMagX;
    int16_t rawMagY;
    int16_t rawMagZ;
    int16_t rawCssX;
    int16_t rawCssY;
    int16_t rawCssZ;
    int16_t rawSunX;
    int16_t rawSunY;
    int16_t rawSunZ;
    int16_t rawNadirX;
    int16_t rawNadirY;
    int16_t rawNadirZ;
    int16_t rawRateX;
    int16_t rawRateY;
    int16_t rawRateZ;
    int16_t rawStar1BX;
    int16_t rawStar1BY;
    int16_t rawStar1BZ;
    int16_t rawStar1OX;
    int16_t rawStar1OY;
    int16_t rawStar1OZ;
    int16_t rawStar2BX;
    int16_t rawStar2BY;
    int16_t rawStar2BZ;
    int16_t rawStar2OX;
    int16_t rawStar2OY;
    int16_t rawStar2OZ;
    int16_t rawStar3BX;
    int16_t rawStar3BY;
    int16_t rawStar3BZ;
    int16_t rawStar3OX;
    int16_t rawStar3OY;
    int16_t rawStar3OZ;
    I2C_TransferReturn_TypeDef i2cResult;



    if (adcsMeasure == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 72, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    rawMagX = *( (int16_t*) (tlmBuffer + 0) );
    adcsMeasure->magX = rawMagX*0.01;

    rawMagY = *( (int16_t*) (tlmBuffer + 2) );
    adcsMeasure->magY = rawMagY*0.01;

    rawMagZ = *( (int16_t*) (tlmBuffer + 4) );
    adcsMeasure->magZ = rawMagZ*0.01;

    rawCssX = *( (int16_t*) (tlmBuffer + 6) );
    adcsMeasure->cssX = rawCssX/10000.0;

    rawCssY = *( (int16_t*) (tlmBuffer + 8) );
    adcsMeasure->cssY = rawCssY/10000.0;

    rawCssZ = *( (int16_t*) (tlmBuffer + 10) );
    adcsMeasure->cssZ = rawCssZ/10000.0;

    rawSunX = *( (int16_t*) (tlmBuffer + 12) );
    adcsMeasure->sunX = rawSunX/10000.0;

    rawSunY = *( (int16_t*) (tlmBuffer + 14) );
    adcsMeasure->sunY = rawSunY/10000.0;

    rawSunZ = *( (int16_t*) (tlmBuffer + 16) );
    adcsMeasure->sunZ = rawSunZ/10000.0;

    rawNadirX = *( (int16_t*) (tlmBuffer + 18) );
    adcsMeasure->nadirX = rawNadirX/10000.0;

    rawNadirY = *( (int16_t*) (tlmBuffer + 20) );
    adcsMeasure->nadirY = rawNadirY/10000.0;

    rawNadirZ = *( (int16_t*) (tlmBuffer + 22) );
    adcsMeasure->nadirZ = rawNadirZ/10000.0;

    rawRateX = *( (int16_t*) (tlmBuffer + 24) );
    adcsMeasure->rateX = rawRateX*0.01;

    rawRateY = *( (int16_t*) (tlmBuffer + 26) );
    adcsMeasure->rateY = rawRateY*0.01;

    rawRateZ = *( (int16_t*) (tlmBuffer + 28) );
    adcsMeasure->rateZ = rawRateZ*0.01;

    adcsMeasure->speedX = *( (int16_t*) (tlmBuffer + 30) );

    adcsMeasure->speedY = *( (int16_t*) (tlmBuffer + 32) );

    adcsMeasure->speedZ = *( (int16_t*) (tlmBuffer + 34) );

    rawStar1BX = *( (int16_t*) (tlmBuffer + 36) );
    adcsMeasure->star1BX = rawStar1BX/10000.0;

    rawStar1BY = *( (int16_t*) (tlmBuffer + 38) );
    adcsMeasure->star1BY = rawStar1BY/10000.0;

    rawStar1BZ = *( (int16_t*) (tlmBuffer + 40) );
    adcsMeasure->star1BZ = rawStar1BZ/10000.0;

    rawStar1OX = *( (int16_t*) (tlmBuffer + 42) );
    adcsMeasure->star1OX = rawStar1OX/10000.0;

    rawStar1OY = *( (int16_t*) (tlmBuffer + 44) );
    adcsMeasure->star1OY = rawStar1OY/10000.0;

    rawStar1OZ = *( (int16_t*) (tlmBuffer + 46) );
    adcsMeasure->star1OZ = rawStar1OZ/10000.0;

    rawStar2BX = *( (int16_t*) (tlmBuffer + 48) );
    adcsMeasure->star2BX = rawStar2BX/10000.0;

    rawStar2BY = *( (int16_t*) (tlmBuffer + 50) );
    adcsMeasure->star2BY = rawStar2BY/10000.0;

    rawStar2BZ = *( (int16_t*) (tlmBuffer + 52) );
    adcsMeasure->star2BZ = rawStar2BZ/10000.0;

    rawStar2OX = *( (int16_t*) (tlmBuffer + 54) );
    adcsMeasure->star2OX = rawStar2OX/10000.0;

    rawStar2OY = *( (int16_t*) (tlmBuffer + 56) );
    adcsMeasure->star2OY = rawStar2OY/10000.0;

    rawStar2OZ = *( (int16_t*) (tlmBuffer + 58) );
    adcsMeasure->star2OZ = rawStar2OZ/10000.0;

    rawStar3BX = *( (int16_t*) (tlmBuffer + 60) );
    adcsMeasure->star3BX = rawStar3BX/10000.0;

    rawStar3BY = *( (int16_t*) (tlmBuffer + 62) );
    adcsMeasure->star3BY = rawStar3BY/10000.0;

    rawStar3BZ = *( (int16_t*) (tlmBuffer + 64) );
    adcsMeasure->star3BZ = rawStar3BZ/10000.0;

    rawStar3OX = *( (int16_t*) (tlmBuffer + 66) );
    adcsMeasure->star3OX = rawStar3OX/10000.0;

    rawStar3OY = *( (int16_t*) (tlmBuffer + 68) );
    adcsMeasure->star3OY = rawStar3OY/10000.0;

    rawStar3OZ = *( (int16_t*) (tlmBuffer + 70) );
    adcsMeasure->star3OZ = rawStar3OZ/10000.0;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqAdcsMiscCurrentsTlm(uint8_t nodeid, CUBELIB_AdcsMiscCurrentsTlm_t* adcsMiscCurrents)
{
    uint8_t tlmId = 198;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (adcsMiscCurrents == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqAdcsPowerTlm(uint8_t nodeid, CUBELIB_AdcsPowerTlm_t* adcsPower)
{
    uint8_t tlmId = 197;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;


    uint8_t enumVal;

    if (adcsPower == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 3, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    enumVal = (tlmBuffer[0] >> 0) & 3;
    adcsPower->cubeControlSignalPower = (CUBELIB_CUBEACP_t) enumVal;

    enumVal = (tlmBuffer[0] >> 2) & 3;
    adcsPower->cubeControlMotorPower = (CUBELIB_CUBEACP_t) enumVal;

    enumVal = (tlmBuffer[0] >> 4) & 3;
    adcsPower->cubeSensePower = (CUBELIB_CUBEACP_t) enumVal;

    enumVal = (tlmBuffer[0] >> 6) & 3;
    adcsPower->cubeStarPower = (CUBELIB_CUBEACP_t) enumVal;

    enumVal = (tlmBuffer[1] >> 0) & 3;
    adcsPower->cubeWheel1Power = (CUBELIB_CUBEACP_t) enumVal;

    enumVal = (tlmBuffer[1] >> 2) & 3;
    adcsPower->cubeWheel2Power = (CUBELIB_CUBEACP_t) enumVal;

    enumVal = (tlmBuffer[1] >> 4) & 3;
    adcsPower->cubeWheel3Power = (CUBELIB_CUBEACP_t) enumVal;

    enumVal = (tlmBuffer[1] >> 6) & 3;
    adcsPower->motorPower = (CUBELIB_CUBEACP_t) enumVal;

    enumVal = (tlmBuffer[2] >> 0) & 3;
    adcsPower->gpsLnaPower = (CUBELIB_CUBEACP_t) enumVal;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqAdcsPowerMeasureTlm(uint8_t nodeid, CUBELIB_AdcsPowerMeasureTlm_t* adcsPowerMeasure)
{
    uint8_t tlmId = 195;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    uint16_t rawCubeSense3V3Current;
    uint16_t rawCubeSenseCam2Current;
    uint16_t rawCubeSenseCam1Current;
    uint16_t rawCubeControl3V3Current;
    uint16_t rawCubeControl5VCurrent;
    uint16_t rawCubeControlBatCurrent;
    uint16_t rawWheel1Current;
    uint16_t rawWheel2Current;
    uint16_t rawWheel3Current;
    uint16_t rawCubeStarCurrent;
    uint16_t rawMagtorqCurrent;
    int16_t rawMagnetometerTemp;
    int16_t rawRedundentMagnetometerTemp;
    I2C_TransferReturn_TypeDef i2cResult;



    if (adcsPowerMeasure == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 34, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    rawCubeSense3V3Current = *( (uint16_t*) (tlmBuffer + 0) );
    adcsPowerMeasure->cubeSense3V3Current = rawCubeSense3V3Current*0.1;

    rawCubeSenseCam2Current = *( (uint16_t*) (tlmBuffer + 2) );
    adcsPowerMeasure->cubeSenseCam2Current = rawCubeSenseCam2Current*0.1;

    rawCubeSenseCam1Current = *( (uint16_t*) (tlmBuffer + 4) );
    adcsPowerMeasure->cubeSenseCam1Current = rawCubeSenseCam1Current*0.1;

    rawCubeControl3V3Current = *( (uint16_t*) (tlmBuffer + 6) );
    adcsPowerMeasure->cubeControl3V3Current = rawCubeControl3V3Current*0.48828125;

    rawCubeControl5VCurrent = *( (uint16_t*) (tlmBuffer + 8) );
    adcsPowerMeasure->cubeControl5VCurrent = rawCubeControl5VCurrent*0.48828125;

    rawCubeControlBatCurrent = *( (uint16_t*) (tlmBuffer + 10) );
    adcsPowerMeasure->cubeControlBatCurrent = rawCubeControlBatCurrent*0.48828125;

    rawWheel1Current = *( (uint16_t*) (tlmBuffer + 12) );
    adcsPowerMeasure->wheel1Current = rawWheel1Current*0.01;

    rawWheel2Current = *( (uint16_t*) (tlmBuffer + 14) );
    adcsPowerMeasure->wheel2Current = rawWheel2Current*0.01;

    rawWheel3Current = *( (uint16_t*) (tlmBuffer + 16) );
    adcsPowerMeasure->wheel3Current = rawWheel3Current*0.01;

    rawCubeStarCurrent = *( (uint16_t*) (tlmBuffer + 18) );
    adcsPowerMeasure->cubeStarCurrent = rawCubeStarCurrent*0.01;

    rawMagtorqCurrent = *( (uint16_t*) (tlmBuffer + 20) );
    adcsPowerMeasure->magtorqCurrent = rawMagtorqCurrent*0.1;

    adcsPowerMeasure->mCUTemp = *( (int16_t*) (tlmBuffer + 22) );

    rawMagnetometerTemp = *( (int16_t*) (tlmBuffer + 24) );
    adcsPowerMeasure->magnetometerTemp = rawMagnetometerTemp/10.0;

    rawRedundentMagnetometerTemp = *( (int16_t*) (tlmBuffer + 26) );
    adcsPowerMeasure->redundentMagnetometerTemp = rawRedundentMagnetometerTemp/10.0;

    adcsPowerMeasure->xRateTemp = *( (int16_t*) (tlmBuffer + 28) );

    adcsPowerMeasure->yRateTemp = *( (int16_t*) (tlmBuffer + 30) );

    adcsPowerMeasure->zRateTemp = *( (int16_t*) (tlmBuffer + 32) );

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqAdcsStateTlm(uint8_t nodeid, CUBELIB_AdcsStateTlm_t* adcsState)
{
    uint8_t tlmId = 190;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    int16_t rawRoll;
    int16_t rawPitch;
    int16_t rawYaw;
    int16_t rawRateX;
    int16_t rawRateY;
    int16_t rawRateZ;
    int16_t rawPositionX;
    int16_t rawPositionY;
    int16_t rawPositionZ;
    int16_t rawVelocityX;
    int16_t rawVelocityY;
    int16_t rawVelocityZ;
    int16_t rawLatitude;
    int16_t rawLongitude;
    uint16_t rawAltitude;
    I2C_TransferReturn_TypeDef i2cResult;


    uint8_t enumVal;

    if (adcsState == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 48, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    enumVal = (tlmBuffer[0] >> 0) & 15;
    adcsState->estimMode = (CUBELIB_CUBEACP_t) enumVal;

    enumVal = (tlmBuffer[0] >> 4) & 15;
    adcsState->controlMode = (CUBELIB_CUBEACP_t) enumVal;

    enumVal = (tlmBuffer[1] >> 0) & 3;
    adcsState->adcsRunMode = (CUBELIB_CUBEACP_t) enumVal;

    adcsState->cubeControlSignalPower = (tlmBuffer[1] & 0x04) >> 2;

    adcsState->cubeControlMotorPower = (tlmBuffer[1] & 0x08) >> 3;

    adcsState->cubeSensePower = (tlmBuffer[1] & 0x10) >> 4;

    adcsState->cubeWheel1Power = (tlmBuffer[1] & 0x20) >> 5;

    adcsState->cubeWheel2Power = (tlmBuffer[1] & 0x40) >> 6;

    adcsState->cubeWheel3Power = (tlmBuffer[1] & 0x80) >> 7;

    adcsState->cubeStarPower = (tlmBuffer[2] & 0x01) >> 0;

    adcsState->gpsReceiverPower = (tlmBuffer[2] & 0x02) >> 1;

    adcsState->gpsLnaPower = (tlmBuffer[2] & 0x04) >> 2;

    adcsState->motorDriverPower = (tlmBuffer[2] & 0x08) >> 3;

    adcsState->sunAboveHorizon = (tlmBuffer[2] & 0x10) >> 4;

    adcsState->cubeSenseCommsError = (tlmBuffer[2] & 0x20) >> 5;

    adcsState->cubeControlSignalCommsError = (tlmBuffer[2] & 0x40) >> 6;

    adcsState->cubeControlMotorCommsError = (tlmBuffer[2] & 0x80) >> 7;

    adcsState->cubeWheel1CommsError = (tlmBuffer[3] & 0x01) >> 0;

    adcsState->cubeWheel2CommsError = (tlmBuffer[3] & 0x02) >> 1;

    adcsState->cubeWheel3CommsError = (tlmBuffer[3] & 0x04) >> 2;

    adcsState->cubeStarCommsError = (tlmBuffer[3] & 0x08) >> 3;

    adcsState->magRangeError = (tlmBuffer[3] & 0x10) >> 4;

    adcsState->cam1SensOvercurrent = (tlmBuffer[3] & 0x20) >> 5;

    adcsState->cam1SensNotIdle = (tlmBuffer[3] & 0x40) >> 6;

    adcsState->cam1SensDetectError = (tlmBuffer[3] & 0x80) >> 7;

    adcsState->sunSensRangeError = (tlmBuffer[4] & 0x01) >> 0;

    adcsState->cam2SensOvercurrent = (tlmBuffer[4] & 0x02) >> 1;

    adcsState->cam2SensNotIdle = (tlmBuffer[4] & 0x04) >> 2;

    adcsState->cam2SensDetectError = (tlmBuffer[4] & 0x08) >> 3;

    adcsState->nadirSensRangeError = (tlmBuffer[4] & 0x10) >> 4;

    adcsState->rateSensRangeError = (tlmBuffer[4] & 0x20) >> 5;

    adcsState->wheelSpeedRangeError = (tlmBuffer[4] & 0x40) >> 6;

    adcsState->cssError = (tlmBuffer[4] & 0x80) >> 7;

    adcsState->starMatchError = (tlmBuffer[5] & 0x01) >> 0;

    adcsState->starTrackOvercurrent = (tlmBuffer[5] & 0x02) >> 1;

    adcsState->orbitParamsInvalidError = (tlmBuffer[5] & 0x04) >> 2;

    adcsState->configInvalidError = (tlmBuffer[5] & 0x08) >> 3;

    adcsState->controlModeNotAllowed = (tlmBuffer[5] & 0x10) >> 4;

    adcsState->estimatorNotAllowed = (tlmBuffer[5] & 0x20) >> 5;

    adcsState->magfieldModelError = (tlmBuffer[5] & 0x40) >> 6;

    adcsState->nodeRecoveryError = (tlmBuffer[5] & 0x80) >> 7;

    rawRoll = *( (int16_t*) (tlmBuffer + 6) );
    adcsState->roll = rawRoll*0.01;

    rawPitch = *( (int16_t*) (tlmBuffer + 8) );
    adcsState->pitch = rawPitch*0.01;

    rawYaw = *( (int16_t*) (tlmBuffer + 10) );
    adcsState->yaw = rawYaw*0.01;

    adcsState->q1 = *( (int16_t*) (tlmBuffer + 12) );

    adcsState->q2 = *( (int16_t*) (tlmBuffer + 14) );

    adcsState->q3 = *( (int16_t*) (tlmBuffer + 16) );

    rawRateX = *( (int16_t*) (tlmBuffer + 18) );
    adcsState->rateX = rawRateX*0.01;

    rawRateY = *( (int16_t*) (tlmBuffer + 20) );
    adcsState->rateY = rawRateY*0.01;

    rawRateZ = *( (int16_t*) (tlmBuffer + 22) );
    adcsState->rateZ = rawRateZ*0.01;

    rawPositionX = *( (int16_t*) (tlmBuffer + 24) );
    adcsState->positionX = rawPositionX*0.25;

    rawPositionY = *( (int16_t*) (tlmBuffer + 26) );
    adcsState->positionY = rawPositionY*0.25;

    rawPositionZ = *( (int16_t*) (tlmBuffer + 28) );
    adcsState->positionZ = rawPositionZ*0.25;

    rawVelocityX = *( (int16_t*) (tlmBuffer + 30) );
    adcsState->velocityX = rawVelocityX*0.25;

    rawVelocityY = *( (int16_t*) (tlmBuffer + 32) );
    adcsState->velocityY = rawVelocityY*0.25;

    rawVelocityZ = *( (int16_t*) (tlmBuffer + 34) );
    adcsState->velocityZ = rawVelocityZ*0.25;

    rawLatitude = *( (int16_t*) (tlmBuffer + 36) );
    adcsState->latitude = rawLatitude*0.01;

    rawLongitude = *( (int16_t*) (tlmBuffer + 38) );
    adcsState->longitude = rawLongitude*0.01;

    rawAltitude = *( (uint16_t*) (tlmBuffer + 40) );
    adcsState->altitude = rawAltitude*0.01;

    adcsState->posEcefX = *( (int16_t*) (tlmBuffer + 42) );

    adcsState->posEcefY = *( (int16_t*) (tlmBuffer + 44) );

    adcsState->posEcefZ = *( (int16_t*) (tlmBuffer + 46) );

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqAdcsTemperatures1Tlm(uint8_t nodeid, CUBELIB_AdcsTemperatures1Tlm_t* adcsTemperatures1)
{
    uint8_t tlmId = 174;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (adcsTemperatures1 == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqAdcsTemperatures2Tlm(uint8_t nodeid, CUBELIB_AdcsTemperatures2Tlm_t* adcsTemperatures2)
{
    uint8_t tlmId = 175;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (adcsTemperatures2 == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqCmdAttitudeTlm(uint8_t nodeid, CUBELIB_CmdAttitudeTlm_t* cmdAttitude)
{
    uint8_t tlmId = 199;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    int16_t rawRoll;
    int16_t rawPitch;
    int16_t rawYaw;
    I2C_TransferReturn_TypeDef i2cResult;



    if (cmdAttitude == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    rawRoll = *( (int16_t*) (tlmBuffer + 0) );
    cmdAttitude->roll = rawRoll*0.01;

    rawPitch = *( (int16_t*) (tlmBuffer + 2) );
    cmdAttitude->pitch = rawPitch*0.01;

    rawYaw = *( (int16_t*) (tlmBuffer + 4) );
    cmdAttitude->yaw = rawYaw*0.01;

    if ((cmdAttitude->roll < -9000) || (cmdAttitude->roll > 9000))
        return TlmRangeError;

    if ((cmdAttitude->pitch < -18000) || (cmdAttitude->pitch > 18000))
        return TlmRangeError;

    if ((cmdAttitude->yaw < -18000) || (cmdAttitude->yaw > 18000))
        return TlmRangeError;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqCmdTrackingTargetTlm(uint8_t nodeid, CUBELIB_CmdTrackingTargetTlm_t* cmdTrackingTarget)
{
    uint8_t tlmId = 200;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (cmdTrackingTarget == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 12, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    cmdTrackingTarget->longRef = *((float*)(tlmBuffer + 0));

    cmdTrackingTarget->latRef = *((float*)(tlmBuffer + 4));

    cmdTrackingTarget->altRef = *((float*)(tlmBuffer + 8));

    if ((cmdTrackingTarget->longRef < 0) || (cmdTrackingTarget->longRef > 360))
        return TlmRangeError;

    if ((cmdTrackingTarget->latRef < -90) || (cmdTrackingTarget->latRef > 90))
        return TlmRangeError;

    if ((cmdTrackingTarget->altRef < -20000) || (cmdTrackingTarget->altRef > 20000))
        return TlmRangeError;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqCoarseSunVecTlm(uint8_t nodeid, CUBELIB_CoarseSunVecTlm_t* coarseSunVec)
{
    uint8_t tlmId = 152;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (coarseSunVec == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqCubeControlCurrentsTlm(uint8_t nodeid, CUBELIB_CubeControlCurrentsTlm_t* cubeControlCurrents)
{
    uint8_t tlmId = 172;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (cubeControlCurrents == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqCubeSenseCurrentsTlm(uint8_t nodeid, CUBELIB_CubeSenseCurrentsTlm_t* cubeSenseCurrents)
{
    uint8_t tlmId = 171;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (cubeSenseCurrents == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqCurrentAdcsStateTlm(uint8_t nodeid, CUBELIB_CurrentAdcsStateTlm_t* currentAdcsState)
{
    uint8_t tlmId = 145;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (currentAdcsState == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqEstimAttitudeTlm(uint8_t nodeid, CUBELIB_EstimAttitudeTlm_t* estimAttitude)
{
    uint8_t tlmId = 146;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (estimAttitude == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqEstimDataTlm(uint8_t nodeid, CUBELIB_EstimDataTlm_t* estimData)
{
    uint8_t tlmId = 193;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    int16_t rawIgrfMagX;
    int16_t rawIgrfMagY;
    int16_t rawIgrfMagZ;
    int16_t rawModelSunX;
    int16_t rawModelSunY;
    int16_t rawModelSunZ;
    int16_t rawEstimGyroBiasX;
    int16_t rawEstimGyroBiasY;
    int16_t rawEstimGyroBiasZ;
    int16_t rawInnovX;
    int16_t rawInnovY;
    int16_t rawInnovZ;
    int16_t rawQError1;
    int16_t rawQError2;
    int16_t rawQError3;
    int16_t rawQCovar1;
    int16_t rawQCovar2;
    int16_t rawQCovar3;
    int16_t rawRateCovarX;
    int16_t rawRateCovarY;
    int16_t rawRateCovarZ;
    I2C_TransferReturn_TypeDef i2cResult;



    if (estimData == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 42, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    rawIgrfMagX = *( (int16_t*) (tlmBuffer + 0) );
    estimData->igrfMagX = rawIgrfMagX*0.01;

    rawIgrfMagY = *( (int16_t*) (tlmBuffer + 2) );
    estimData->igrfMagY = rawIgrfMagY*0.01;

    rawIgrfMagZ = *( (int16_t*) (tlmBuffer + 4) );
    estimData->igrfMagZ = rawIgrfMagZ*0.01;

    rawModelSunX = *( (int16_t*) (tlmBuffer + 6) );
    estimData->modelSunX = rawModelSunX/10000.0;

    rawModelSunY = *( (int16_t*) (tlmBuffer + 8) );
    estimData->modelSunY = rawModelSunY/10000.0;

    rawModelSunZ = *( (int16_t*) (tlmBuffer + 10) );
    estimData->modelSunZ = rawModelSunZ/10000.0;

    rawEstimGyroBiasX = *( (int16_t*) (tlmBuffer + 12) );
    estimData->estimGyroBiasX = rawEstimGyroBiasX*0.001;

    rawEstimGyroBiasY = *( (int16_t*) (tlmBuffer + 14) );
    estimData->estimGyroBiasY = rawEstimGyroBiasY*0.001;

    rawEstimGyroBiasZ = *( (int16_t*) (tlmBuffer + 16) );
    estimData->estimGyroBiasZ = rawEstimGyroBiasZ*0.001;

    rawInnovX = *( (int16_t*) (tlmBuffer + 18) );
    estimData->innovX = rawInnovX*0.0001;

    rawInnovY = *( (int16_t*) (tlmBuffer + 20) );
    estimData->innovY = rawInnovY*0.0001;

    rawInnovZ = *( (int16_t*) (tlmBuffer + 22) );
    estimData->innovZ = rawInnovZ*0.0001;

    rawQError1 = *( (int16_t*) (tlmBuffer + 24) );
    estimData->qError1 = rawQError1*0.0001;

    rawQError2 = *( (int16_t*) (tlmBuffer + 26) );
    estimData->qError2 = rawQError2*0.0001;

    rawQError3 = *( (int16_t*) (tlmBuffer + 28) );
    estimData->qError3 = rawQError3*0.0001;

    rawQCovar1 = *( (int16_t*) (tlmBuffer + 30) );
    estimData->qCovar1 = rawQCovar1*0.001;

    rawQCovar2 = *( (int16_t*) (tlmBuffer + 32) );
    estimData->qCovar2 = rawQCovar2*0.001;

    rawQCovar3 = *( (int16_t*) (tlmBuffer + 34) );
    estimData->qCovar3 = rawQCovar3*0.001;

    rawRateCovarX = *( (int16_t*) (tlmBuffer + 36) );
    estimData->rateCovarX = rawRateCovarX*0.001;

    rawRateCovarY = *( (int16_t*) (tlmBuffer + 38) );
    estimData->rateCovarY = rawRateCovarY*0.001;

    rawRateCovarZ = *( (int16_t*) (tlmBuffer + 40) );
    estimData->rateCovarZ = rawRateCovarZ*0.001;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqEstimGyroBiasTlm(uint8_t nodeid, CUBELIB_EstimGyroBiasTlm_t* estimGyroBias)
{
    uint8_t tlmId = 161;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (estimGyroBias == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqEstimQuaternionTlm(uint8_t nodeid, CUBELIB_EstimQuaternionTlm_t* estimQuaternion)
{
    uint8_t tlmId = 218;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (estimQuaternion == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqEstimRatesTlm(uint8_t nodeid, CUBELIB_EstimRatesTlm_t* estimRates)
{
    uint8_t tlmId = 147;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (estimRates == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqFineSunVecTlm(uint8_t nodeid, CUBELIB_FineSunVecTlm_t* fineSunVec)
{
    uint8_t tlmId = 153;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (fineSunVec == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqImageSaveStatusTlm(uint8_t nodeid, CUBELIB_ImageSaveStatusTlm_t* imageSaveStatus)
{
    uint8_t tlmId = 233;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;


    uint8_t enumVal;

    if (imageSaveStatus == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 2, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    imageSaveStatus->percentageComplete = *( (uint8_t*) (tlmBuffer + 0) );

    enumVal = tlmBuffer[1];
    imageSaveStatus->status = (CUBELIB_CUBEACP_t) enumVal;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqInnovationVecTlm(uint8_t nodeid, CUBELIB_InnovationVecTlm_t* innovationVec)
{
    uint8_t tlmId = 162;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (innovationVec == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqMagFieldTlm(uint8_t nodeid, CUBELIB_MagFieldTlm_t* magField)
{
    uint8_t tlmId = 151;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (magField == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqMagTorquerCmdTlm(uint8_t nodeid, CUBELIB_MagTorquerCmdTlm_t* magTorquerCmd)
{
    uint8_t tlmId = 157;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (magTorquerCmd == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqModelMagVecTlm(uint8_t nodeid, CUBELIB_ModelMagVecTlm_t* modelMagVec)
{
    uint8_t tlmId = 159;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (modelMagVec == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqModelSunVecTlm(uint8_t nodeid, CUBELIB_ModelSunVecTlm_t* modelSunVec)
{
    uint8_t tlmId = 160;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (modelSunVec == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqNadirVecTlm(uint8_t nodeid, CUBELIB_NadirVecTlm_t* nadirVec)
{
    uint8_t tlmId = 154;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (nadirVec == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqOrbitParametersTlm(uint8_t nodeid, CUBELIB_OrbitParametersTlm_t* orbitParameters)
{
    uint8_t tlmId = 207;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (orbitParameters == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 64, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    memcpy(&orbitParameters->inclination, tlmBuffer + 0, 8);

    memcpy(&orbitParameters->eccentricity, tlmBuffer + 8, 8);

    memcpy(&orbitParameters->raan, tlmBuffer + 16, 8);

    memcpy(&orbitParameters->argPerigee, tlmBuffer + 24, 8);

    memcpy(&orbitParameters->bstar, tlmBuffer + 32, 8);

    memcpy(&orbitParameters->meanMotion, tlmBuffer + 40, 8);

    memcpy(&orbitParameters->meanAnomaly, tlmBuffer + 48, 8);

    memcpy(&orbitParameters->epoch, tlmBuffer + 56, 8);

    if ((orbitParameters->inclination < 0) || (orbitParameters->inclination > 180))
        return TlmRangeError;

    if ((orbitParameters->eccentricity < 0) || (orbitParameters->eccentricity > 1))
        return TlmRangeError;

    if ((orbitParameters->raan < 0) || (orbitParameters->raan > 360))
        return TlmRangeError;

    if ((orbitParameters->argPerigee < 0) || (orbitParameters->argPerigee > 360))
        return TlmRangeError;

    if ((orbitParameters->bstar < 0) || (orbitParameters->bstar > 1))
        return TlmRangeError;

    if ((orbitParameters->meanMotion < 0) || (orbitParameters->meanMotion > 20))
        return TlmRangeError;

    if ((orbitParameters->meanAnomaly < 0) || (orbitParameters->meanAnomaly > 360))
        return TlmRangeError;

    if ((orbitParameters->epoch < 0) || (orbitParameters->epoch > 100000))
        return TlmRangeError;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqPositionECEFTlm(uint8_t nodeid, CUBELIB_PositionECEFTlm_t* positionECEF)
{
    uint8_t tlmId = 219;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (positionECEF == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqPositionECITlm(uint8_t nodeid, CUBELIB_PositionECITlm_t* positionECI)
{
    uint8_t tlmId = 148;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (positionECI == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqPositionLLHTlm(uint8_t nodeid, CUBELIB_PositionLLHTlm_t* positionLLH)
{
    uint8_t tlmId = 150;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (positionLLH == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqQuaternionCovarTlm(uint8_t nodeid, CUBELIB_QuaternionCovarTlm_t* quaternionCovar)
{
    uint8_t tlmId = 164;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (quaternionCovar == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqQuaternionErrVecTlm(uint8_t nodeid, CUBELIB_QuaternionErrVecTlm_t* quaternionErrVec)
{
    uint8_t tlmId = 163;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (quaternionErrVec == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqRateCovarTlm(uint8_t nodeid, CUBELIB_RateCovarTlm_t* rateCovar)
{
    uint8_t tlmId = 165;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (rateCovar == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqRateSensorTlm(uint8_t nodeid, CUBELIB_RateSensorTlm_t* rateSensor)
{
    uint8_t tlmId = 155;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (rateSensor == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqRawCam1SensTlm(uint8_t nodeid, CUBELIB_RawCam1SensTlm_t* rawCam1Sens)
{
    uint8_t tlmId = 167;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (rawCam1Sens == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqRawCam2SensTlm(uint8_t nodeid, CUBELIB_RawCam2SensTlm_t* rawCam2Sens)
{
    uint8_t tlmId = 166;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (rawCam2Sens == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqRawCss1Tlm(uint8_t nodeid, CUBELIB_RawCss1Tlm_t* rawCss1)
{
    uint8_t tlmId = 168;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (rawCss1 == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqRawCss2Tlm(uint8_t nodeid, CUBELIB_RawCss2Tlm_t* rawCss2)
{
    uint8_t tlmId = 169;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (rawCss2 == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqRawGPSTlm(uint8_t nodeid, CUBELIB_RawGPSTlm_t* rawGPS)
{
    uint8_t tlmId = 210;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    uint8_t rawStdDevPosX;
    uint8_t rawStdDevPosY;
    uint8_t rawStdDevPosZ;
    I2C_TransferReturn_TypeDef i2cResult;


    uint8_t enumVal;

    if (rawGPS == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 36, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    enumVal = tlmBuffer[0];
    rawGPS->gpsSolutionStatus = (CUBELIB_CUBEACP_t) enumVal;

    rawGPS->gpsNumSatsTracked = *( (uint8_t*) (tlmBuffer + 1) );

    rawGPS->gpsNumSatsSolution = *( (uint8_t*) (tlmBuffer + 2) );

    rawGPS->gpsXYZLogCtr = *( (uint8_t*) (tlmBuffer + 3) );

    rawGPS->gpsRangeLogCtr = *( (uint8_t*) (tlmBuffer + 4) );

    rawGPS->gpsResponse = *( (uint8_t*) (tlmBuffer + 5) );

    rawGPS->gpsWeek = *( (uint16_t*) (tlmBuffer + 6) );

    rawGPS->gpsTimeMs = *( (uint32_t*) (tlmBuffer + 8) );

    rawGPS->posEcefX = *( (int32_t*) (tlmBuffer + 12) );

    rawGPS->velEcefX = *( (int16_t*) (tlmBuffer + 16) );

    rawGPS->posEcefY = *( (int32_t*) (tlmBuffer + 18) );

    rawGPS->velEcefY = *( (int16_t*) (tlmBuffer + 22) );

    rawGPS->posEcefZ = *( (int32_t*) (tlmBuffer + 24) );

    rawGPS->velEcefZ = *( (int16_t*) (tlmBuffer + 28) );

    rawStdDevPosX = *( (uint8_t*) (tlmBuffer + 30) );
    rawGPS->stdDevPosX = rawStdDevPosX*0.1;

    rawStdDevPosY = *( (uint8_t*) (tlmBuffer + 31) );
    rawGPS->stdDevPosY = rawStdDevPosY*0.1;

    rawStdDevPosZ = *( (uint8_t*) (tlmBuffer + 32) );
    rawGPS->stdDevPosZ = rawStdDevPosZ*0.1;

    rawGPS->stdDevVelX = *( (uint8_t*) (tlmBuffer + 33) );

    rawGPS->stdDevVelY = *( (uint8_t*) (tlmBuffer + 34) );

    rawGPS->stdDevVelZ = *( (uint8_t*) (tlmBuffer + 35) );

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqRawGpsStatusTlm(uint8_t nodeid, CUBELIB_RawGpsStatusTlm_t* rawGpsStatus)
{
    uint8_t tlmId = 176;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (rawGpsStatus == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqRawGpsTimeTlm(uint8_t nodeid, CUBELIB_RawGpsTimeTlm_t* rawGpsTime)
{
    uint8_t tlmId = 177;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (rawGpsTime == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqRawGpsXTlm(uint8_t nodeid, CUBELIB_RawGpsXTlm_t* rawGpsX)
{
    uint8_t tlmId = 178;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (rawGpsX == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqRawGpsYTlm(uint8_t nodeid, CUBELIB_RawGpsYTlm_t* rawGpsY)
{
    uint8_t tlmId = 179;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (rawGpsY == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqRawGpsZTlm(uint8_t nodeid, CUBELIB_RawGpsZTlm_t* rawGpsZ)
{
    uint8_t tlmId = 180;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (rawGpsZ == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqRawMagnetometerTlm(uint8_t nodeid, CUBELIB_RawMagnetometerTlm_t* rawMagnetometer)
{
    uint8_t tlmId = 170;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (rawMagnetometer == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqRawSensorTlm(uint8_t nodeid, CUBELIB_RawSensorTlm_t* rawSensor)
{
    uint8_t tlmId = 194;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;


    uint8_t enumVal;

    if (rawSensor == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 28, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    rawSensor->cam2RawX = *( (int16_t*) (tlmBuffer + 0) );

    rawSensor->cam2RawY = *( (int16_t*) (tlmBuffer + 2) );

    enumVal = tlmBuffer[4];
    rawSensor->cam2Busy = (CUBELIB_CUBEACP_t) enumVal;

    enumVal = tlmBuffer[5];
    rawSensor->cam2Result = (CUBELIB_CUBEACP_t) enumVal;

    rawSensor->cam1RawX = *( (int16_t*) (tlmBuffer + 6) );

    rawSensor->cam1RawY = *( (int16_t*) (tlmBuffer + 8) );

    enumVal = tlmBuffer[10];
    rawSensor->cam1Busy = (CUBELIB_CUBEACP_t) enumVal;

    enumVal = tlmBuffer[11];
    rawSensor->cam1Result = (CUBELIB_CUBEACP_t) enumVal;

    rawSensor->cssRaw1 = *( (uint8_t*) (tlmBuffer + 12) );

    rawSensor->cssRaw2 = *( (uint8_t*) (tlmBuffer + 13) );

    rawSensor->cssRaw3 = *( (uint8_t*) (tlmBuffer + 14) );

    rawSensor->cssRaw4 = *( (uint8_t*) (tlmBuffer + 15) );

    rawSensor->cssRaw5 = *( (uint8_t*) (tlmBuffer + 16) );

    rawSensor->cssRaw6 = *( (uint8_t*) (tlmBuffer + 17) );

    rawSensor->cssRaw7 = *( (uint8_t*) (tlmBuffer + 18) );

    rawSensor->cssRaw8 = *( (uint8_t*) (tlmBuffer + 19) );

    rawSensor->cssRaw9 = *( (uint8_t*) (tlmBuffer + 20) );

    rawSensor->cssRaw10 = *( (uint8_t*) (tlmBuffer + 21) );

    rawSensor->magRawX = *( (int16_t*) (tlmBuffer + 22) );

    rawSensor->magRawY = *( (int16_t*) (tlmBuffer + 24) );

    rawSensor->magRawZ = *( (int16_t*) (tlmBuffer + 26) );

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqRawStarTrackerTlm(uint8_t nodeid, CUBELIB_RawStarTrackerTlm_t* rawStarTracker)
{
    uint8_t tlmId = 211;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;


    uint8_t enumVal;

    if (rawStarTracker == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 36, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    enumVal = (tlmBuffer[0] >> 0) & 15;
    rawStarTracker->numStarDetected = (CUBELIB_CUBEACP_t) enumVal;

    enumVal = (tlmBuffer[0] >> 4) & 15;
    rawStarTracker->numStarIdent = (CUBELIB_CUBEACP_t) enumVal;

    rawStarTracker->starNoise = *( (uint8_t*) (tlmBuffer + 1) );

    rawStarTracker->attitudeSuccess = (tlmBuffer[2] & 0x01) >> 0;

    rawStarTracker->imageCaptureSuccess = (tlmBuffer[2] & 0x02) >> 1;

    rawStarTracker->detectionSuccess = (tlmBuffer[2] & 0x04) >> 2;

    rawStarTracker->identificationSuccess = (tlmBuffer[2] & 0x08) >> 3;

    rawStarTracker->loopTimeError = (tlmBuffer[2] & 0x10) >> 4;

    rawStarTracker->maxStarsDetected = (tlmBuffer[2] & 0x20) >> 5;

    rawStarTracker->lessThanThreeStarsInFoV = (tlmBuffer[2] & 0x40) >> 6;

    rawStarTracker->commsError = (tlmBuffer[2] & 0x80) >> 7;

    rawStarTracker->confStar1 = *( (uint8_t*) (tlmBuffer + 3) );

    rawStarTracker->confStar2 = *( (uint8_t*) (tlmBuffer + 4) );

    rawStarTracker->confStar3 = *( (uint8_t*) (tlmBuffer + 5) );

    rawStarTracker->magStar1 = *( (uint16_t*) (tlmBuffer + 6) );

    rawStarTracker->magStar2 = *( (uint16_t*) (tlmBuffer + 8) );

    rawStarTracker->magStar3 = *( (uint16_t*) (tlmBuffer + 10) );

    rawStarTracker->catStar1 = *( (uint16_t*) (tlmBuffer + 12) );

    rawStarTracker->centXStar1 = *( (int16_t*) (tlmBuffer + 14) );

    rawStarTracker->centYStar1 = *( (int16_t*) (tlmBuffer + 16) );

    rawStarTracker->catStar2 = *( (uint16_t*) (tlmBuffer + 18) );

    rawStarTracker->centXStar2 = *( (int16_t*) (tlmBuffer + 20) );

    rawStarTracker->centYStar2 = *( (int16_t*) (tlmBuffer + 22) );

    rawStarTracker->catStar3 = *( (uint16_t*) (tlmBuffer + 24) );

    rawStarTracker->centXStar3 = *( (int16_t*) (tlmBuffer + 26) );

    rawStarTracker->centYStar3 = *( (int16_t*) (tlmBuffer + 28) );

    rawStarTracker->capture = *( (uint16_t*) (tlmBuffer + 30) );

    rawStarTracker->detection = *( (uint16_t*) (tlmBuffer + 32) );

    rawStarTracker->identification = *( (uint16_t*) (tlmBuffer + 34) );

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqReduntMagRawTlm(uint8_t nodeid, CUBELIB_ReduntMagRawTlm_t* reduntMagRaw)
{
    uint8_t tlmId = 215;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (reduntMagRaw == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    reduntMagRaw->magRawX = *( (int16_t*) (tlmBuffer + 0) );

    reduntMagRaw->magRawY = *( (int16_t*) (tlmBuffer + 2) );

    reduntMagRaw->magRawZ = *( (int16_t*) (tlmBuffer + 4) );

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqSpeedCmdTlm(uint8_t nodeid, CUBELIB_SpeedCmdTlm_t* speedCmd)
{
    uint8_t tlmId = 158;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (speedCmd == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqStar1BodyTlm(uint8_t nodeid, CUBELIB_Star1BodyTlm_t* star1Body)
{
    uint8_t tlmId = 181;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (star1Body == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqStar1OrbitTlm(uint8_t nodeid, CUBELIB_Star1OrbitTlm_t* star1Orbit)
{
    uint8_t tlmId = 184;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (star1Orbit == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqStar1RawTlm(uint8_t nodeid, CUBELIB_Star1RawTlm_t* star1Raw)
{
    uint8_t tlmId = 212;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (star1Raw == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqStar2BodyTlm(uint8_t nodeid, CUBELIB_Star2BodyTlm_t* star2Body)
{
    uint8_t tlmId = 182;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (star2Body == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqStar2OrbitTlm(uint8_t nodeid, CUBELIB_Star2OrbitTlm_t* star2Orbit)
{
    uint8_t tlmId = 185;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (star2Orbit == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqStar2RawTlm(uint8_t nodeid, CUBELIB_Star2RawTlm_t* star2Raw)
{
    uint8_t tlmId = 213;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (star2Raw == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqStar3BodyTlm(uint8_t nodeid, CUBELIB_Star3BodyTlm_t* star3Body)
{
    uint8_t tlmId = 183;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (star3Body == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqStar3OrbitTlm(uint8_t nodeid, CUBELIB_Star3OrbitTlm_t* star3Orbit)
{
    uint8_t tlmId = 186;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (star3Orbit == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqStar3RawTlm(uint8_t nodeid, CUBELIB_Star3RawTlm_t* star3Raw)
{
    uint8_t tlmId = 214;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (star3Raw == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqStarMagnitudeTlm(uint8_t nodeid, CUBELIB_StarMagnitudeTlm_t* starMagnitude)
{
    uint8_t tlmId = 187;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (starMagnitude == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqStarPerformanceTlm(uint8_t nodeid, CUBELIB_StarPerformanceTlm_t* starPerformance)
{
    uint8_t tlmId = 188;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (starPerformance == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqStarTimingTlm(uint8_t nodeid, CUBELIB_StarTimingTlm_t* starTiming)
{
    uint8_t tlmId = 189;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (starTiming == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqVelocityECITlm(uint8_t nodeid, CUBELIB_VelocityECITlm_t* velocityECI)
{
    uint8_t tlmId = 149;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (velocityECI == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqWheelCurrentsTlm(uint8_t nodeid, CUBELIB_WheelCurrentsTlm_t* wheelCurrents)
{
    uint8_t tlmId = 173;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (wheelCurrents == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqWheelSpeedTlm(uint8_t nodeid, CUBELIB_WheelSpeedTlm_t* wheelSpeed)
{
    uint8_t tlmId = 156;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (wheelSpeed == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqBlockChecksumTlm(uint8_t nodeid, uint16_t* checksum)
{
    uint8_t tlmId = 246;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (checksum == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 2, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    *checksum = *( (uint16_t*) (tlmBuffer + 0) );

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqDownloadBlockReadyTlm(uint8_t nodeid, CUBELIB_DownloadBlockReadyTlm_t* downloadBlockReady)
{
    uint8_t tlmId = 242;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (downloadBlockReady == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 5, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    downloadBlockReady->ready = (tlmBuffer[0] & 0x01) >> 0;

    downloadBlockReady->parameterError = (tlmBuffer[0] & 0x02) >> 1;

    downloadBlockReady->checksum = *( (uint16_t*) (tlmBuffer + 1) );

    downloadBlockReady->length = *( (uint16_t*) (tlmBuffer + 3) );

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqFileDownloadTlm(uint8_t nodeid, CUBELIB_FileDownloadTlm_t* fileDownload)
{
    uint8_t tlmId = 241;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (fileDownload == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 22, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    fileDownload->packetNo = *( (uint16_t*) (tlmBuffer + 0) );

    memcpy(fileDownload->fileBytes, tlmBuffer + 2, 20);

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqFileInfoTlm(uint8_t nodeid, CUBELIB_FileInfoTlm_t* fileInfo)
{
    uint8_t tlmId = 243;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;


    uint8_t enumVal;

    if (fileInfo == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 12, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    enumVal = (tlmBuffer[0] >> 0) & 15;
    fileInfo->fileType = (CUBELIB_CUBEACP_t) enumVal;

    fileInfo->busyUpdating = (tlmBuffer[0] & 0x10) >> 4;

    fileInfo->fileCtr = *( (uint8_t*) (tlmBuffer + 1) );

    fileInfo->size = *( (uint32_t*) (tlmBuffer + 2) );

    fileInfo->unixTime = *( (uint32_t*) (tlmBuffer + 6) );

    fileInfo->checksum = *( (uint16_t*) (tlmBuffer + 10) );

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqHoleMap1Tlm(uint8_t nodeid, uint8_t* holeMap)
{
    uint8_t tlmId = 247;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (holeMap == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 16, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    memcpy(holeMap, tlmBuffer + 0, 16);

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqHoleMap2Tlm(uint8_t nodeid, uint8_t* holeMap)
{
    uint8_t tlmId = 248;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (holeMap == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 16, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    memcpy(holeMap, tlmBuffer + 0, 16);

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqHoleMap3Tlm(uint8_t nodeid, uint8_t* holeMap)
{
    uint8_t tlmId = 249;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (holeMap == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 16, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    memcpy(holeMap, tlmBuffer + 0, 16);

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqHoleMap4Tlm(uint8_t nodeid, uint8_t* holeMap)
{
    uint8_t tlmId = 250;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (holeMap == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 16, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    memcpy(holeMap, tlmBuffer + 0, 16);

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqHoleMap5Tlm(uint8_t nodeid, uint8_t* holeMap)
{
    uint8_t tlmId = 251;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (holeMap == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 16, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    memcpy(holeMap, tlmBuffer + 0, 16);

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqHoleMap6Tlm(uint8_t nodeid, uint8_t* holeMap)
{
    uint8_t tlmId = 252;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (holeMap == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 16, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    memcpy(holeMap, tlmBuffer + 0, 16);

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqHoleMap7Tlm(uint8_t nodeid, uint8_t* holeMap)
{
    uint8_t tlmId = 253;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (holeMap == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 16, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    memcpy(holeMap, tlmBuffer + 0, 16);

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqHoleMap8Tlm(uint8_t nodeid, uint8_t* holeMap)
{
    uint8_t tlmId = 254;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (holeMap == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 16, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    memcpy(holeMap, tlmBuffer + 0, 16);

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqInitializeUploadCompleteTlm(uint8_t nodeid, bool* busy)
{
    uint8_t tlmId = 244;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (busy == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    *busy = (tlmBuffer[0] & 0x01) >> 0;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqUploadBlockCompleteTlm(uint8_t nodeid, CUBELIB_UploadBlockCompleteTlm_t* uploadBlockComplete)
{
    uint8_t tlmId = 245;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (uploadBlockComplete == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    uploadBlockComplete->busy = (tlmBuffer[0] & 0x01) >> 0;

    uploadBlockComplete->error = (tlmBuffer[0] & 0x02) >> 1;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqConversionProgressTlm(uint8_t nodeid, CUBELIB_ConversionProgressTlm_t* conversionProgress)
{
    uint8_t tlmId = 133;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;


    uint8_t enumVal;

    if (conversionProgress == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 3, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    conversionProgress->progress = *( (uint8_t*) (tlmBuffer + 0) );

    enumVal = tlmBuffer[1];
    conversionProgress->conversionResult = (CUBELIB_CUBEACP_t) enumVal;

    conversionProgress->outFileCounter = *( (uint8_t*) (tlmBuffer + 2) );

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqBootIndexStatusTlm(uint8_t nodeid, CUBELIB_BootIndexStatusTlm_t* bootIndexStatus)
{
    uint8_t tlmId = 130;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;


    uint8_t enumVal;

    if (bootIndexStatus == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 2, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    enumVal = tlmBuffer[0];
    bootIndexStatus->programIndex = (CUBELIB_CUBEACP_t) enumVal;

    enumVal = tlmBuffer[1];
    bootIndexStatus->bootStatus = (CUBELIB_CUBEACP_t) enumVal;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqCacheTlm(uint8_t nodeid, bool* enabled)
{
    uint8_t tlmId = 131;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (enabled == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    *enabled = (tlmBuffer[0] & 0x01) >> 0;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqCommsStatusTlm(uint8_t nodeid, CUBELIB_CommsStatusTlm_t* commsStatus)
{
    uint8_t tlmId = 144;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (commsStatus == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    commsStatus->tcCounter = *( (uint16_t*) (tlmBuffer + 0) );

    commsStatus->tlmCounter = *( (uint16_t*) (tlmBuffer + 2) );

    commsStatus->uartBufferOverrun = (tlmBuffer[4] & 0x01) >> 0;

    commsStatus->uartProtocolError = (tlmBuffer[4] & 0x02) >> 1;

    commsStatus->uartMsgIncomplete = (tlmBuffer[4] & 0x04) >> 2;

    commsStatus->i2CTelemetryError = (tlmBuffer[4] & 0x08) >> 3;

    commsStatus->i2CBufferError = (tlmBuffer[4] & 0x10) >> 4;

    commsStatus->cANBufferError = (tlmBuffer[4] & 0x20) >> 5;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqEdacErrorsTlm(uint8_t nodeid, CUBELIB_EdacErrorsTlm_t* edacErrors)
{
    uint8_t tlmId = 143;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (edacErrors == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    edacErrors->singleSRAMSEUs = *( (uint16_t*) (tlmBuffer + 0) );

    edacErrors->doubleSRAMSEUs = *( (uint16_t*) (tlmBuffer + 2) );

    edacErrors->multiSRAMSEUs = *( (uint16_t*) (tlmBuffer + 4) );

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqExtendedIdentificationTlm(uint8_t nodeid, CUBELIB_ExtendedIdentificationTlm_t* extendedIdentification)
{
    uint8_t tlmId = 132;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;


    uint8_t enumVal;

    if (extendedIdentification == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    enumVal = (tlmBuffer[0] >> 0) & 15;
    extendedIdentification->mcuResetCause = (CUBELIB_CUBEACP_t) enumVal;

    enumVal = (tlmBuffer[0] >> 4) & 15;
    extendedIdentification->bootCause = (CUBELIB_CUBEACP_t) enumVal;

    extendedIdentification->bootCounter = *( (uint16_t*) (tlmBuffer + 1) );

    enumVal = tlmBuffer[3];
    extendedIdentification->runningProgramIndex = (CUBELIB_CUBEACP_t) enumVal;

    extendedIdentification->firmwareMajorVersion = *( (uint8_t*) (tlmBuffer + 4) );

    extendedIdentification->firmwareMinorVersion = *( (uint8_t*) (tlmBuffer + 5) );

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqIdentificationTlm(uint8_t nodeid, CUBELIB_IdentificationTlm_t* identification)
{
    uint8_t tlmId = 128;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (identification == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 8, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    identification->nodeType = *( (uint8_t*) (tlmBuffer + 0) );

    identification->interfaceVersion = *( (uint8_t*) (tlmBuffer + 1) );

    identification->firmwareMajorVersion = *( (uint8_t*) (tlmBuffer + 2) );

    identification->firmwareMinorVersion = *( (uint8_t*) (tlmBuffer + 3) );

    identification->runtimeSeconds = *( (uint16_t*) (tlmBuffer + 4) );

    identification->runtimeMilliseconds = *( (uint16_t*) (tlmBuffer + 6) );

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqLastLogEventTlm(uint8_t nodeid, CUBELIB_LastLogEventTlm_t* lastLogEvent)
{
    uint8_t tlmId = 141;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (lastLogEvent == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    lastLogEvent->unixTime = *( (uint32_t*) (tlmBuffer + 0) );

    lastLogEvent->eventId = *( (uint8_t*) (tlmBuffer + 4) );

    lastLogEvent->eventParam = *( (uint8_t*) (tlmBuffer + 5) );

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqLatchupErrorsTlm(uint8_t nodeid, CUBELIB_LatchupErrorsTlm_t* latchupErrors)
{
    uint8_t tlmId = 142;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (latchupErrors == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    latchupErrors->sRAM1SELs = *( (uint16_t*) (tlmBuffer + 0) );

    latchupErrors->sRAM2SELs = *( (uint16_t*) (tlmBuffer + 2) );

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqSramScrubSettingsTlm(uint8_t nodeid, uint16_t* scrubSize)
{
    uint8_t tlmId = 134;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (scrubSize == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 2, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    *scrubSize = *( (uint16_t*) (tlmBuffer + 0) );

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqTelecommandAcknowledgeTlm(uint8_t nodeid, CUBELIB_TelecommandAcknowledgeTlm_t* telecommandAcknowledge)
{
    uint8_t tlmId = 240;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;


    uint8_t enumVal;

    if (telecommandAcknowledge == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 4, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    telecommandAcknowledge->lastTCID = *( (uint8_t*) (tlmBuffer + 0) );

    telecommandAcknowledge->processedFlag = (tlmBuffer[1] & 0x01) >> 0;

    enumVal = tlmBuffer[2];
    telecommandAcknowledge->tCerrorStatus  = (CUBELIB_CUBEACP_t) enumVal;

    telecommandAcknowledge->tCParameterErrorIndex = *( (uint8_t*) (tlmBuffer + 3) );

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqUnixTimeTlm(uint8_t nodeid, CUBELIB_UnixTimeTlm_t* unixTime)
{
    uint8_t tlmId = 140;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (unixTime == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 6, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    unixTime->time = *( (uint32_t*) (tlmBuffer + 0) );

    unixTime->milliSec = *( (uint16_t*) (tlmBuffer + 4) );

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqUnixTimeSaveTlm(uint8_t nodeid, CUBELIB_UnixTimeSaveTlm_t* unixTimeSave)
{
    uint8_t tlmId = 129;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (unixTimeSave == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 2, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    unixTimeSave->saveNow = (tlmBuffer[0] & 0x01) >> 0;

    unixTimeSave->saveOnUpdate = (tlmBuffer[0] & 0x02) >> 1;

    unixTimeSave->savePeriodic = (tlmBuffer[0] & 0x04) >> 2;

    unixTimeSave->period = *( (uint8_t*) (tlmBuffer + 1) );

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqLogSdConfig1Tlm(uint8_t nodeid, CUBELIB_LogSdConfig1Tlm_t* logSdConfig1)
{
    uint8_t tlmId = 235;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;


    uint8_t enumVal;

    if (logSdConfig1 == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 13, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    memcpy(logSdConfig1->logSelection, tlmBuffer + 0, 10);

    logSdConfig1->period = *( (uint16_t*) (tlmBuffer + 10) );

    enumVal = tlmBuffer[12];
    logSdConfig1->destination = (CUBELIB_CUBEACP_t) enumVal;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqLogSdConfig2Tlm(uint8_t nodeid, CUBELIB_LogSdConfig2Tlm_t* logSdConfig2)
{
    uint8_t tlmId = 236;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;


    uint8_t enumVal;

    if (logSdConfig2 == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 13, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    memcpy(logSdConfig2->logSelection, tlmBuffer + 0, 10);

    logSdConfig2->period = *( (uint16_t*) (tlmBuffer + 10) );

    enumVal = tlmBuffer[12];
    logSdConfig2->destination = (CUBELIB_CUBEACP_t) enumVal;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_ReqLogUartConfigTlm(uint8_t nodeid, CUBELIB_LogUartConfigTlm_t* logUartConfig)
{
    uint8_t tlmId = 237;
    uint8_t* tlmBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (logUartConfig == 0)
        return PointerIsNull;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_WRITE, &tlmId, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

   TIME_Delay(2);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, 0xAA, I2C_FLAG_READ, tlmBuffer, 12, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    memcpy(logUartConfig->selection, tlmBuffer + 0, 10);

    logUartConfig->period = *( (uint16_t*) (tlmBuffer + 10) );

    return CubeLibOk;
}


CUBELIB_Result_t CUBELIB_SendClearErrorsCmd(uint8_t nodeid, bool aDCSErrors, bool hKErrors)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 12;

    tcBuffer[1] =
        (aDCSErrors << 0) +
        (hKErrors << 1);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 2, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendDefaultConfigCmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 60;


    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendSaveConfigCmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 63;


    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendSaveOrbitParamsCmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 64;


    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendAdcsConfigCmd(uint8_t nodeid, CUBELIB_CUBEACP_t magtorq1, CUBELIB_CUBEACP_t magtorq2, CUBELIB_CUBEACP_t magtorq3, CUBELIB_CUBEACP_t rW1Conf, CUBELIB_CUBEACP_t rW2Conf, CUBELIB_CUBEACP_t rW3Conf, CUBELIB_CUBEACP_t rW4Conf, CUBELIB_CUBEACP_t gyro1Conf, CUBELIB_CUBEACP_t gyro2Conf, CUBELIB_CUBEACP_t gyro3Conf, CUBELIB_CUBEACP_t css1Conf, CUBELIB_CUBEACP_t css2Conf, CUBELIB_CUBEACP_t css3Conf, CUBELIB_CUBEACP_t css4Conf, CUBELIB_CUBEACP_t css5Conf, CUBELIB_CUBEACP_t css6Conf, CUBELIB_CUBEACP_t css7Conf, CUBELIB_CUBEACP_t css8Conf, CUBELIB_CUBEACP_t css9Conf, CUBELIB_CUBEACP_t css10Conf, double css1Scale, double css2Scale, double css3Scale, double css4Scale, double css5Scale, double css6Scale, double css7Scale, double css8Scale, double css9Scale, double css10Scale, uint8_t cssMinimum, double cam1Angle1, double cam1Angle2, double cam1Angle3, uint8_t cam1Threshold, bool cam1AutoAdj, uint16_t cam1Exposure, double cam1BoreX, double cam1BoreY, bool cam1Shift, double cam2Angle1, double cam2Angle2, double cam2Angle3, uint8_t cam2Threshold, bool cam2AutoAdj, uint16_t cam2Exposure, double cam2BoreX, double cam2BoreY, bool cam2Shift, uint16_t maskArea1Xmin, uint16_t maskArea1Xmax, uint16_t maskArea1Ymin, uint16_t maskArea1Ymax, uint16_t maskArea2Xmin, uint16_t maskArea2Xmax, uint16_t maskArea2Ymin, uint16_t maskArea2Ymax, uint16_t maskArea3Xmin, uint16_t maskArea3Xmax, uint16_t maskArea3Ymin, uint16_t maskArea3Ymax, uint16_t maskArea4Xmin, uint16_t maskArea4Xmax, uint16_t maskArea4Ymin, uint16_t maskArea4Ymax, uint16_t maskArea5Xmin, uint16_t maskArea5Xmax, uint16_t maskArea5Ymin, uint16_t maskArea5Ymax, double magmAngle1, double magmAngle2, double magmAngle3, double magmOffset1, double magmOffset2, double magmOffset3, double magmSens11, double magmSens22, double magmSens33, double magmSens12, double magmSens13, double magmSens21, double magmSens23, double magmSens31, double magmSens32, double xRateOffset, double yRateOffset, double zRateOffset, uint8_t rateSensorMult, double starAngle1, double starAngle2, double starAngle3, uint16_t starExposure, uint8_t detectionThreshold, uint8_t starThreshold, uint8_t maxStarMatched, uint8_t maxStarPixel, uint8_t maxStarNoise, uint8_t minStarPixel, double starErrorMargin, float starCentX, float starCentY, double starFocal, uint8_t syncDelay, float ks, float kd, double wy_ref, float kdf, float kh, float kn, float kp1, float kd1, float h_ref, float kp2, float kd2, float kp3, float kd3, float ki3, float ixx, float iyy, float izz, float ixy, float ixz, float iyz, float magRateNoise, float ekfSysNoise, float cssNoise, float sunNoise, float nadirNoise, float magNoise, float starNoise, bool useSunEst, bool useNadirEst, bool useCssEst, bool useStarEst, CUBELIB_CUBEACP_t magMode, uint8_t cam1Cam2Period)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (((magtorq1 < 0) || (magtorq1 > 6)))
        return TcInvalidParam;

    if (((magtorq2 < 0) || (magtorq2 > 6)))
        return TcInvalidParam;

    if (((magtorq3 < 0) || (magtorq3 > 6)))
        return TcInvalidParam;

    if (((rW1Conf < 0) || (rW1Conf > 6)))
        return TcInvalidParam;

    if (((rW2Conf < 0) || (rW2Conf > 6)))
        return TcInvalidParam;

    if (((rW3Conf < 0) || (rW3Conf > 6)))
        return TcInvalidParam;

    if (((rW4Conf < 0) || (rW4Conf > 6)))
        return TcInvalidParam;

    if (((gyro1Conf < 0) || (gyro1Conf > 6)))
        return TcInvalidParam;

    if (((gyro2Conf < 0) || (gyro2Conf > 6)))
        return TcInvalidParam;

    if (((gyro3Conf < 0) || (gyro3Conf > 6)))
        return TcInvalidParam;

    if (((css1Conf < 0) || (css1Conf > 6)))
        return TcInvalidParam;

    if (((css2Conf < 0) || (css2Conf > 6)))
        return TcInvalidParam;

    if (((css3Conf < 0) || (css3Conf > 6)))
        return TcInvalidParam;

    if (((css4Conf < 0) || (css4Conf > 6)))
        return TcInvalidParam;

    if (((css5Conf < 0) || (css5Conf > 6)))
        return TcInvalidParam;

    if (((css6Conf < 0) || (css6Conf > 6)))
        return TcInvalidParam;

    if (((css7Conf < 0) || (css7Conf > 6)))
        return TcInvalidParam;

    if (((css8Conf < 0) || (css8Conf > 6)))
        return TcInvalidParam;

    if (((css9Conf < 0) || (css9Conf > 6)))
        return TcInvalidParam;

    if (((css10Conf < 0) || (css10Conf > 6)))
        return TcInvalidParam;

    if ((starCentX < -5000) || (starCentX > 5000))
        return TcInvalidParam;

    if ((starCentY < -5000) || (starCentY > 5000))
        return TcInvalidParam;

    if ((ks < 0) || (ks > 10000))
        return TcInvalidParam;

    if ((kd < 0) || (kd > 10000))
        return TcInvalidParam;

    if ((wy_ref < -100000) || (wy_ref > 0))
        return TcInvalidParam;

    if ((kdf < 0) || (kdf > 100))
        return TcInvalidParam;

    if ((kh < 0) || (kh > 10000))
        return TcInvalidParam;

    if ((kn < 0) || (kn > 10000))
        return TcInvalidParam;

    if ((kp1 < 0) || (kp1 > 100))
        return TcInvalidParam;

    if ((kd1 < 0) || (kd1 > 100))
        return TcInvalidParam;

    if ((h_ref < -10) || (h_ref > 0))
        return TcInvalidParam;

    if ((kp2 < 0) || (kp2 > 100))
        return TcInvalidParam;

    if ((kd2 < 0) || (kd2 > 100))
        return TcInvalidParam;

    if ((kp3 < 0) || (kp3 > 100))
        return TcInvalidParam;

    if ((kd3 < 0) || (kd3 > 100))
        return TcInvalidParam;

    if ((ki3 < 0) || (ki3 > 100))
        return TcInvalidParam;

    if ((ixx < 0) || (ixx > 10))
        return TcInvalidParam;

    if ((iyy < 0) || (iyy > 10))
        return TcInvalidParam;

    if ((izz < 0) || (izz > 10))
        return TcInvalidParam;

    if ((ixy < -10) || (ixy > 10))
        return TcInvalidParam;

    if ((ixz < -10) || (ixz > 10))
        return TcInvalidParam;

    if ((iyz < -10) || (iyz > 10))
        return TcInvalidParam;

    if ((magRateNoise < 0) || (magRateNoise > 100))
        return TcInvalidParam;

    if ((ekfSysNoise < 0) || (ekfSysNoise > 100))
        return TcInvalidParam;

    if ((cssNoise < 0) || (cssNoise > 100))
        return TcInvalidParam;

    if ((sunNoise < 0) || (sunNoise > 100))
        return TcInvalidParam;

    if ((nadirNoise < 0) || (nadirNoise > 100))
        return TcInvalidParam;

    if ((magNoise < 0) || (magNoise > 100))
        return TcInvalidParam;

    if ((starNoise < 0) || (starNoise > 100))
        return TcInvalidParam;

    if (((magMode < 0) || (magMode > 3)))
        return TcInvalidParam;

    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 20;

    tcBuffer[1] =
        (magtorq1 << 0);
    tcBuffer[2] =
        (magtorq2 << 0);
    tcBuffer[3] =
        (magtorq3 << 0);
    tcBuffer[4] =
        (rW1Conf << 0);
    tcBuffer[5] =
        (rW2Conf << 0);
    tcBuffer[6] =
        (rW3Conf << 0);
    tcBuffer[7] =
        (rW4Conf << 0);
    tcBuffer[8] =
        (gyro1Conf << 0);
    tcBuffer[9] =
        (gyro2Conf << 0);
    tcBuffer[10] =
        (gyro3Conf << 0);
    tcBuffer[11] =
        (css1Conf << 0);
    tcBuffer[12] =
        (css2Conf << 0);
    tcBuffer[13] =
        (css3Conf << 0);
    tcBuffer[14] =
        (css4Conf << 0);
    tcBuffer[15] =
        (css5Conf << 0);
    tcBuffer[16] =
        (css6Conf << 0);
    tcBuffer[17] =
        (css7Conf << 0);
    tcBuffer[18] =
        (css8Conf << 0);
    tcBuffer[19] =
        (css9Conf << 0);
    tcBuffer[20] =
        (css10Conf << 0);
    tcBuffer[39] =
        (cam1AutoAdj << 0);
    tcBuffer[46] =
        (cam1Shift << 0);
    tcBuffer[54] =
        (cam2AutoAdj << 0);
    tcBuffer[61] =
        (cam2Shift << 0);
    tcBuffer[271] =
        (useSunEst << 0) +
        (useNadirEst << 1) +
        (useCssEst << 2) +
        (useStarEst << 3) +
        (magMode << 4);
    *( (uint8_t*)(tcBuffer + 21) ) = (uint8_t) round(css1Scale*100.0);
    *( (uint8_t*)(tcBuffer + 22) ) = (uint8_t) round(css2Scale*100.0);
    *( (uint8_t*)(tcBuffer + 23) ) = (uint8_t) round(css3Scale*100.0);
    *( (uint8_t*)(tcBuffer + 24) ) = (uint8_t) round(css4Scale*100.0);
    *( (uint8_t*)(tcBuffer + 25) ) = (uint8_t) round(css5Scale*100.0);
    *( (uint8_t*)(tcBuffer + 26) ) = (uint8_t) round(css6Scale*100.0);
    *( (uint8_t*)(tcBuffer + 27) ) = (uint8_t) round(css7Scale*100.0);
    *( (uint8_t*)(tcBuffer + 28) ) = (uint8_t) round(css8Scale*100.0);
    *( (uint8_t*)(tcBuffer + 29) ) = (uint8_t) round(css9Scale*100.0);
    *( (uint8_t*)(tcBuffer + 30) ) = (uint8_t) round(css10Scale*100.0);
    *( (uint8_t*)(tcBuffer + 31) ) = cssMinimum;
    *( (int16_t*)(tcBuffer + 32) ) = (int16_t) round(cam1Angle1*100.0);
    *( (int16_t*)(tcBuffer + 34) ) = (int16_t) round(cam1Angle2*100.0);
    *( (int16_t*)(tcBuffer + 36) ) = (int16_t) round(cam1Angle3*100.0);
    *( (uint8_t*)(tcBuffer + 38) ) = cam1Threshold;
    *( (uint16_t*)(tcBuffer + 40) ) = cam1Exposure;
    *( (uint16_t*)(tcBuffer + 42) ) = (uint16_t) round(cam1BoreX*100.0);
    *( (uint16_t*)(tcBuffer + 44) ) = (uint16_t) round(cam1BoreY*100.0);
    *( (int16_t*)(tcBuffer + 47) ) = (int16_t) round(cam2Angle1*100.0);
    *( (int16_t*)(tcBuffer + 49) ) = (int16_t) round(cam2Angle2*100.0);
    *( (int16_t*)(tcBuffer + 51) ) = (int16_t) round(cam2Angle3*100.0);
    *( (uint8_t*)(tcBuffer + 53) ) = cam2Threshold;
    *( (uint16_t*)(tcBuffer + 55) ) = cam2Exposure;
    *( (uint16_t*)(tcBuffer + 57) ) = (uint16_t) round(cam2BoreX*100.0);
    *( (uint16_t*)(tcBuffer + 59) ) = (uint16_t) round(cam2BoreY*100.0);
    *( (uint16_t*)(tcBuffer + 62) ) = maskArea1Xmin;
    *( (uint16_t*)(tcBuffer + 64) ) = maskArea1Xmax;
    *( (uint16_t*)(tcBuffer + 66) ) = maskArea1Ymin;
    *( (uint16_t*)(tcBuffer + 68) ) = maskArea1Ymax;
    *( (uint16_t*)(tcBuffer + 70) ) = maskArea2Xmin;
    *( (uint16_t*)(tcBuffer + 72) ) = maskArea2Xmax;
    *( (uint16_t*)(tcBuffer + 74) ) = maskArea2Ymin;
    *( (uint16_t*)(tcBuffer + 76) ) = maskArea2Ymax;
    *( (uint16_t*)(tcBuffer + 78) ) = maskArea3Xmin;
    *( (uint16_t*)(tcBuffer + 80) ) = maskArea3Xmax;
    *( (uint16_t*)(tcBuffer + 82) ) = maskArea3Ymin;
    *( (uint16_t*)(tcBuffer + 84) ) = maskArea3Ymax;
    *( (uint16_t*)(tcBuffer + 86) ) = maskArea4Xmin;
    *( (uint16_t*)(tcBuffer + 88) ) = maskArea4Xmax;
    *( (uint16_t*)(tcBuffer + 90) ) = maskArea4Ymin;
    *( (uint16_t*)(tcBuffer + 92) ) = maskArea4Ymax;
    *( (uint16_t*)(tcBuffer + 94) ) = maskArea5Xmin;
    *( (uint16_t*)(tcBuffer + 96) ) = maskArea5Xmax;
    *( (uint16_t*)(tcBuffer + 98) ) = maskArea5Ymin;
    *( (uint16_t*)(tcBuffer + 100) ) = maskArea5Ymax;
    *( (int16_t*)(tcBuffer + 102) ) = (int16_t) round(magmAngle1*100.0);
    *( (int16_t*)(tcBuffer + 104) ) = (int16_t) round(magmAngle2*100.0);
    *( (int16_t*)(tcBuffer + 106) ) = (int16_t) round(magmAngle3*100.0);
    *( (int16_t*)(tcBuffer + 108) ) = (int16_t) round(magmOffset1*1000.0);
    *( (int16_t*)(tcBuffer + 110) ) = (int16_t) round(magmOffset2*1000.0);
    *( (int16_t*)(tcBuffer + 112) ) = (int16_t) round(magmOffset3*1000.0);
    *( (int16_t*)(tcBuffer + 114) ) = (int16_t) round(magmSens11*1000.0);
    *( (int16_t*)(tcBuffer + 116) ) = (int16_t) round(magmSens22*1000.0);
    *( (int16_t*)(tcBuffer + 118) ) = (int16_t) round(magmSens33*1000.0);
    *( (int16_t*)(tcBuffer + 120) ) = (int16_t) round(magmSens12*1000.0);
    *( (int16_t*)(tcBuffer + 122) ) = (int16_t) round(magmSens13*1000.0);
    *( (int16_t*)(tcBuffer + 124) ) = (int16_t) round(magmSens21*1000.0);
    *( (int16_t*)(tcBuffer + 126) ) = (int16_t) round(magmSens23*1000.0);
    *( (int16_t*)(tcBuffer + 128) ) = (int16_t) round(magmSens31*1000.0);
    *( (int16_t*)(tcBuffer + 130) ) = (int16_t) round(magmSens32*1000.0);
    *( (int16_t*)(tcBuffer + 132) ) = (int16_t) round(xRateOffset*1000.0);
    *( (int16_t*)(tcBuffer + 134) ) = (int16_t) round(yRateOffset*1000.0);
    *( (int16_t*)(tcBuffer + 136) ) = (int16_t) round(zRateOffset*1000.0);
    *( (uint8_t*)(tcBuffer + 138) ) = rateSensorMult;
    *( (int16_t*)(tcBuffer + 139) ) = (int16_t) round(starAngle1*100.0);
    *( (int16_t*)(tcBuffer + 141) ) = (int16_t) round(starAngle2*100.0);
    *( (int16_t*)(tcBuffer + 143) ) = (int16_t) round(starAngle3*100.0);
    *( (uint16_t*)(tcBuffer + 145) ) = starExposure;
    *( (uint8_t*)(tcBuffer + 147) ) = detectionThreshold;
    *( (uint8_t*)(tcBuffer + 148) ) = starThreshold;
    *( (uint8_t*)(tcBuffer + 149) ) = maxStarMatched;
    *( (uint8_t*)(tcBuffer + 150) ) = maxStarPixel;
    *( (uint8_t*)(tcBuffer + 151) ) = maxStarNoise;
    *( (uint8_t*)(tcBuffer + 152) ) = minStarPixel;
    *( (uint8_t*)(tcBuffer + 153) ) = (uint8_t) round(starErrorMargin*100.0);
    *( (float*)(tcBuffer + 154) ) = starCentX;
    *( (float*)(tcBuffer + 158) ) = starCentY;
    *( (uint16_t*)(tcBuffer + 162) ) = (uint16_t) round(starFocal*10000.0);
    *( (uint8_t*)(tcBuffer + 164) ) = syncDelay;
    *( (float*)(tcBuffer + 165) ) = ks;
    *( (float*)(tcBuffer + 169) ) = kd;
    *( (int16_t*)(tcBuffer + 173) ) = (int16_t) round(wy_ref*1000.0);
    *( (float*)(tcBuffer + 175) ) = kdf;
    *( (float*)(tcBuffer + 179) ) = kh;
    *( (float*)(tcBuffer + 183) ) = kn;
    *( (float*)(tcBuffer + 187) ) = kp1;
    *( (float*)(tcBuffer + 191) ) = kd1;
    *( (float*)(tcBuffer + 195) ) = h_ref;
    *( (float*)(tcBuffer + 199) ) = kp2;
    *( (float*)(tcBuffer + 203) ) = kd2;
    *( (float*)(tcBuffer + 207) ) = kp3;
    *( (float*)(tcBuffer + 211) ) = kd3;
    *( (float*)(tcBuffer + 215) ) = ki3;
    *( (float*)(tcBuffer + 219) ) = ixx;
    *( (float*)(tcBuffer + 223) ) = iyy;
    *( (float*)(tcBuffer + 227) ) = izz;
    *( (float*)(tcBuffer + 231) ) = ixy;
    *( (float*)(tcBuffer + 235) ) = ixz;
    *( (float*)(tcBuffer + 239) ) = iyz;
    *( (float*)(tcBuffer + 243) ) = magRateNoise;
    *( (float*)(tcBuffer + 247) ) = ekfSysNoise;
    *( (float*)(tcBuffer + 251) ) = cssNoise;
    *( (float*)(tcBuffer + 255) ) = sunNoise;
    *( (float*)(tcBuffer + 259) ) = nadirNoise;
    *( (float*)(tcBuffer + 263) ) = magNoise;
    *( (float*)(tcBuffer + 267) ) = starNoise;
    *( (uint8_t*)(tcBuffer + 272) ) = cam1Cam2Period;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 273, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendAdcsEnabledCmd(uint8_t nodeid, CUBELIB_CUBEACP_t enabled)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (((enabled < 0) || (enabled > 3)))
        return TcInvalidParam;

    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 10;

    tcBuffer[1] =
        (enabled << 0);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 2, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendAdcsPowerCmd(uint8_t nodeid, CUBELIB_CUBEACP_t cubeControlSignalPower, CUBELIB_CUBEACP_t cubeControlMotorPower, CUBELIB_CUBEACP_t cubeSensePower, CUBELIB_CUBEACP_t cubeStarPower, CUBELIB_CUBEACP_t cubeWheel1Power, CUBELIB_CUBEACP_t cubeWheel2Power, CUBELIB_CUBEACP_t cubeWheel3Power, CUBELIB_CUBEACP_t motorPower, CUBELIB_CUBEACP_t gpsLnaPower)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (((cubeControlSignalPower < 0) || (cubeControlSignalPower > 3)))
        return TcInvalidParam;

    if (((cubeControlMotorPower < 0) || (cubeControlMotorPower > 3)))
        return TcInvalidParam;

    if (((cubeSensePower < 0) || (cubeSensePower > 3)))
        return TcInvalidParam;

    if (((cubeStarPower < 0) || (cubeStarPower > 3)))
        return TcInvalidParam;

    if (((cubeWheel1Power < 0) || (cubeWheel1Power > 3)))
        return TcInvalidParam;

    if (((cubeWheel2Power < 0) || (cubeWheel2Power > 3)))
        return TcInvalidParam;

    if (((cubeWheel3Power < 0) || (cubeWheel3Power > 3)))
        return TcInvalidParam;

    if (((motorPower < 0) || (motorPower > 3)))
        return TcInvalidParam;

    if (((gpsLnaPower < 0) || (gpsLnaPower > 3)))
        return TcInvalidParam;

    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 11;

    tcBuffer[1] =
        (cubeControlSignalPower << 0) +
        (cubeControlMotorPower << 2) +
        (cubeSensePower << 4) +
        (cubeStarPower << 6);
    tcBuffer[2] =
        (cubeWheel1Power << 0) +
        (cubeWheel2Power << 2) +
        (cubeWheel3Power << 4) +
        (motorPower << 6);
    tcBuffer[3] =
        (gpsLnaPower << 0);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 4, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendCam1ConfigCmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 26;

    tcBuffer[8] =
        (cam1AutoAdj << 0);
    tcBuffer[15] =
        (cam1Shift << 0);
    *( (int16_t*)(tcBuffer + 1) ) = (int16_t) round(cam1Angle1*100.0);
    *( (int16_t*)(tcBuffer + 3) ) = (int16_t) round(cam1Angle2*100.0);
    *( (int16_t*)(tcBuffer + 5) ) = (int16_t) round(cam1Angle3*100.0);
    *( (uint8_t*)(tcBuffer + 7) ) = cam1Threshold;
    *( (uint16_t*)(tcBuffer + 9) ) = cam1Exposure;
    *( (uint16_t*)(tcBuffer + 11) ) = (uint16_t) round(cam1BoreX*100.0);
    *( (uint16_t*)(tcBuffer + 13) ) = (uint16_t) round(cam1BoreY*100.0);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 16, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendCam2ConfigCmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 27;

    tcBuffer[8] =
        (cam2AutoAdj << 0);
    tcBuffer[15] =
        (cam2Shift << 0);
    *( (int16_t*)(tcBuffer + 1) ) = (int16_t) round(cam2Angle1*100.0);
    *( (int16_t*)(tcBuffer + 3) ) = (int16_t) round(cam2Angle2*100.0);
    *( (int16_t*)(tcBuffer + 5) ) = (int16_t) round(cam2Angle3*100.0);
    *( (uint8_t*)(tcBuffer + 7) ) = cam2Threshold;
    *( (uint16_t*)(tcBuffer + 9) ) = cam2Exposure;
    *( (uint16_t*)(tcBuffer + 11) ) = (uint16_t) round(cam2BoreX*100.0);
    *( (uint16_t*)(tcBuffer + 13) ) = (uint16_t) round(cam2BoreY*100.0);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 16, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendCmdAttitudeCmd(uint8_t nodeid, double roll, double pitch, double yaw)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if ((roll < -9000) || (roll > 9000))
        return TcInvalidParam;

    if ((pitch < -18000) || (pitch > 18000))
        return TcInvalidParam;

    if ((yaw < -18000) || (yaw > 18000))
        return TcInvalidParam;

    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 15;

    *( (int16_t*)(tcBuffer + 1) ) = (int16_t) round(roll*100.0);
    *( (int16_t*)(tcBuffer + 3) ) = (int16_t) round(pitch*100.0);
    *( (int16_t*)(tcBuffer + 5) ) = (int16_t) round(yaw*100.0);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 7, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendCmdTrackingTargetCmd(uint8_t nodeid, float longRef, float latRef, float altRef)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if ((longRef < 0) || (longRef > 360))
        return TcInvalidParam;

    if ((latRef < -90) || (latRef > 90))
        return TcInvalidParam;

    if ((altRef < -20000) || (altRef > 20000))
        return TcInvalidParam;

    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 55;

    *( (float*)(tcBuffer + 1) ) = longRef;
    *( (float*)(tcBuffer + 5) ) = latRef;
    *( (float*)(tcBuffer + 9) ) = altRef;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 13, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendControlModeCmd(uint8_t nodeid, CUBELIB_CUBEACP_t controlModeSelection, bool overrideErrors, uint16_t timeout)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (((controlModeSelection < 0) || (controlModeSelection > 13)))
        return TcInvalidParam;

    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 13;

    tcBuffer[1] =
        (controlModeSelection << 0);
    tcBuffer[2] =
        (overrideErrors << 0);
    *( (uint16_t*)(tcBuffer + 3) ) = timeout;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 5, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendCssConfig1Cmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 24;

    tcBuffer[1] =
        (css1Conf << 0);
    tcBuffer[2] =
        (css2Conf << 0);
    tcBuffer[3] =
        (css3Conf << 0);
    tcBuffer[4] =
        (css4Conf << 0);
    tcBuffer[5] =
        (css5Conf << 0);
    tcBuffer[6] =
        (css6Conf << 0);
    tcBuffer[7] =
        (css7Conf << 0);
    tcBuffer[8] =
        (css8Conf << 0);
    tcBuffer[9] =
        (css9Conf << 0);
    tcBuffer[10] =
        (css10Conf << 0);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 11, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendCssConfig2Cmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 25;

    *( (uint8_t*)(tcBuffer + 1) ) = (uint8_t) round(css1Scale*100.0);
    *( (uint8_t*)(tcBuffer + 2) ) = (uint8_t) round(css2Scale*100.0);
    *( (uint8_t*)(tcBuffer + 3) ) = (uint8_t) round(css3Scale*100.0);
    *( (uint8_t*)(tcBuffer + 4) ) = (uint8_t) round(css4Scale*100.0);
    *( (uint8_t*)(tcBuffer + 5) ) = (uint8_t) round(css5Scale*100.0);
    *( (uint8_t*)(tcBuffer + 6) ) = (uint8_t) round(css6Scale*100.0);
    *( (uint8_t*)(tcBuffer + 7) ) = (uint8_t) round(css7Scale*100.0);
    *( (uint8_t*)(tcBuffer + 8) ) = (uint8_t) round(css8Scale*100.0);
    *( (uint8_t*)(tcBuffer + 9) ) = (uint8_t) round(css9Scale*100.0);
    *( (uint8_t*)(tcBuffer + 10) ) = (uint8_t) round(css10Scale*100.0);
    *( (uint8_t*)(tcBuffer + 11) ) = cssMinimum;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 12, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendDeployMagnetometerCmd(uint8_t nodeid, uint8_t timeout)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 7;

    *( (uint8_t*)(tcBuffer + 1) ) = timeout;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 2, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendDetumbleParamsCmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 38;

    *( (float*)(tcBuffer + 1) ) = ks;
    *( (float*)(tcBuffer + 5) ) = kd;
    *( (int16_t*)(tcBuffer + 9) ) = (int16_t) round(wy_ref*1000.0);
    *( (float*)(tcBuffer + 11) ) = kdf;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 15, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendEstimModeCmd(uint8_t nodeid, CUBELIB_CUBEACP_t estimModeSelection)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (((estimModeSelection < 0) || (estimModeSelection > 6)))
        return TcInvalidParam;

    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 14;

    tcBuffer[1] =
        (estimModeSelection << 0);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 2, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendEstimParams1Cmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 43;

    *( (float*)(tcBuffer + 1) ) = magRateNoise;
    *( (float*)(tcBuffer + 5) ) = ekfSysNoise;
    *( (float*)(tcBuffer + 9) ) = cssNoise;
    *( (float*)(tcBuffer + 13) ) = sunNoise;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 17, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendEstimParams2Cmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 44;

    tcBuffer[13] =
        (useSunEst << 0) +
        (useNadirEst << 1) +
        (useCssEst << 2) +
        (useStarEst << 3) +
        (magMode << 4);
    *( (float*)(tcBuffer + 1) ) = nadirNoise;
    *( (float*)(tcBuffer + 5) ) = magNoise;
    *( (float*)(tcBuffer + 9) ) = starNoise;
    *( (uint8_t*)(tcBuffer + 14) ) = cam1Cam2Period;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 15, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendGyroConfigCmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 23;

    tcBuffer[1] =
        (gyro1Conf << 0);
    tcBuffer[2] =
        (gyro2Conf << 0);
    tcBuffer[3] =
        (gyro3Conf << 0);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 4, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendMagConfig1Cmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 33;

    *( (int16_t*)(tcBuffer + 1) ) = (int16_t) round(magmAngle1*100.0);
    *( (int16_t*)(tcBuffer + 3) ) = (int16_t) round(magmAngle2*100.0);
    *( (int16_t*)(tcBuffer + 5) ) = (int16_t) round(magmAngle3*100.0);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 7, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendMagConfig2Cmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 34;

    *( (int16_t*)(tcBuffer + 1) ) = (int16_t) round(magmOffset1*1000.0);
    *( (int16_t*)(tcBuffer + 3) ) = (int16_t) round(magmOffset2*1000.0);
    *( (int16_t*)(tcBuffer + 5) ) = (int16_t) round(magmOffset3*1000.0);
    *( (int16_t*)(tcBuffer + 7) ) = (int16_t) round(magmSens11*1000.0);
    *( (int16_t*)(tcBuffer + 9) ) = (int16_t) round(magmSens22*1000.0);
    *( (int16_t*)(tcBuffer + 11) ) = (int16_t) round(magmSens33*1000.0);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 13, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendMagConfig3Cmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 35;

    *( (int16_t*)(tcBuffer + 1) ) = (int16_t) round(magmSens12*1000.0);
    *( (int16_t*)(tcBuffer + 3) ) = (int16_t) round(magmSens13*1000.0);
    *( (int16_t*)(tcBuffer + 5) ) = (int16_t) round(magmSens21*1000.0);
    *( (int16_t*)(tcBuffer + 7) ) = (int16_t) round(magmSens23*1000.0);
    *( (int16_t*)(tcBuffer + 9) ) = (int16_t) round(magmSens31*1000.0);
    *( (int16_t*)(tcBuffer + 11) ) = (int16_t) round(magmSens32*1000.0);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 13, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendMagModeCmd(uint8_t nodeid, CUBELIB_CUBEACP_t modeSetting)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (((modeSetting < 0) || (modeSetting > 3)))
        return TcInvalidParam;

    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 56;

    tcBuffer[1] =
        (modeSetting << 0);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 2, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendMagtorqConfigCmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 21;

    tcBuffer[1] =
        (magtorq1 << 0);
    tcBuffer[2] =
        (magtorq2 << 0);
    tcBuffer[3] =
        (magtorq3 << 0);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 4, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendMoICmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 41;

    *( (float*)(tcBuffer + 1) ) = ixx;
    *( (float*)(tcBuffer + 5) ) = iyy;
    *( (float*)(tcBuffer + 9) ) = izz;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 13, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendNadirMaskConfig1Cmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 28;

    *( (uint16_t*)(tcBuffer + 1) ) = maskArea1Xmin;
    *( (uint16_t*)(tcBuffer + 3) ) = maskArea1Xmax;
    *( (uint16_t*)(tcBuffer + 5) ) = maskArea1Ymin;
    *( (uint16_t*)(tcBuffer + 7) ) = maskArea1Ymax;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 9, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendNadirMaskConfig2Cmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 29;

    *( (uint16_t*)(tcBuffer + 1) ) = maskArea2Xmin;
    *( (uint16_t*)(tcBuffer + 3) ) = maskArea2Xmax;
    *( (uint16_t*)(tcBuffer + 5) ) = maskArea2Ymin;
    *( (uint16_t*)(tcBuffer + 7) ) = maskArea2Ymax;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 9, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendNadirMaskConfig3Cmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 30;

    *( (uint16_t*)(tcBuffer + 1) ) = maskArea3Xmin;
    *( (uint16_t*)(tcBuffer + 3) ) = maskArea3Xmax;
    *( (uint16_t*)(tcBuffer + 5) ) = maskArea3Ymin;
    *( (uint16_t*)(tcBuffer + 7) ) = maskArea3Ymax;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 9, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendNadirMaskConfig4Cmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 31;

    *( (uint16_t*)(tcBuffer + 1) ) = maskArea4Xmin;
    *( (uint16_t*)(tcBuffer + 3) ) = maskArea4Xmax;
    *( (uint16_t*)(tcBuffer + 5) ) = maskArea4Ymin;
    *( (uint16_t*)(tcBuffer + 7) ) = maskArea4Ymax;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 9, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendNadirMaskConfig5Cmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 32;

    *( (uint16_t*)(tcBuffer + 1) ) = maskArea5Xmin;
    *( (uint16_t*)(tcBuffer + 3) ) = maskArea5Xmax;
    *( (uint16_t*)(tcBuffer + 5) ) = maskArea5Ymin;
    *( (uint16_t*)(tcBuffer + 7) ) = maskArea5Ymax;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 9, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendOrbitArgPerCmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 49;

    memcpy(tcBuffer + 1, &argPerigee, 8);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 9, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendOrbitBStarCmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 50;

    memcpy(tcBuffer + 1, &bstar, 8);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 9, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendOrbitEccentricityCmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 47;

    memcpy(tcBuffer + 1, &eccentricity, 8);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 9, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendOrbitEpochCmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 53;

    memcpy(tcBuffer + 1, &epoch, 8);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 9, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendOrbitInclinationCmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 46;

    memcpy(tcBuffer + 1, &inclination, 8);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 9, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendOrbitMeanAnomCmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 52;

    memcpy(tcBuffer + 1, &meanAnomaly, 8);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 9, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendOrbitMeanMotCmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 51;

    memcpy(tcBuffer + 1, &meanMotion, 8);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 9, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendOrbitParametersCmd(uint8_t nodeid, double inclination, double eccentricity, double raan, double argPerigee, double bstar, double meanMotion, double meanAnomaly, double epoch)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if ((inclination < 0) || (inclination > 180))
        return TcInvalidParam;

    if ((eccentricity < 0) || (eccentricity > 1))
        return TcInvalidParam;

    if ((raan < 0) || (raan > 360))
        return TcInvalidParam;

    if ((argPerigee < 0) || (argPerigee > 360))
        return TcInvalidParam;

    if ((bstar < 0) || (bstar > 1))
        return TcInvalidParam;

    if ((meanMotion < 0) || (meanMotion > 20))
        return TcInvalidParam;

    if ((meanAnomaly < 0) || (meanAnomaly > 360))
        return TcInvalidParam;

    if ((epoch < 0) || (epoch > 100000))
        return TcInvalidParam;

    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 45;

    memcpy(tcBuffer + 1, &inclination, 8);
    memcpy(tcBuffer + 9, &eccentricity, 8);
    memcpy(tcBuffer + 17, &raan, 8);
    memcpy(tcBuffer + 25, &argPerigee, 8);
    memcpy(tcBuffer + 33, &bstar, 8);
    memcpy(tcBuffer + 41, &meanMotion, 8);
    memcpy(tcBuffer + 49, &meanAnomaly, 8);
    memcpy(tcBuffer + 57, &epoch, 8);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, nodeid, I2C_FLAG_WRITE, tcBuffer, 65, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendOrbitRaanCmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 48;

    memcpy(tcBuffer + 1, &raan, 8);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 9, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendPoICmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 42;

    *( (float*)(tcBuffer + 1) ) = ixy;
    *( (float*)(tcBuffer + 5) ) = ixz;
    *( (float*)(tcBuffer + 9) ) = iyz;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 13, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendRateConfigCmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 36;

    *( (int16_t*)(tcBuffer + 1) ) = (int16_t) round(xRateOffset*1000.0);
    *( (int16_t*)(tcBuffer + 3) ) = (int16_t) round(yRateOffset*1000.0);
    *( (int16_t*)(tcBuffer + 5) ) = (int16_t) round(zRateOffset*1000.0);
    *( (uint8_t*)(tcBuffer + 7) ) = rateSensorMult;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 8, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendRWheelParamsCmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 40;

    *( (float*)(tcBuffer + 1) ) = kp2;
    *( (float*)(tcBuffer + 5) ) = kd2;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 9, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendSaveImageCmd(uint8_t nodeid, CUBELIB_CUBEACP_t cameraSelect, CUBELIB_CUBEACP_t imageSize)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (((cameraSelect < 0) || (cameraSelect > 2)))
        return TcInvalidParam;

    if (((imageSize < 0) || (imageSize > 4)))
        return TcInvalidParam;

    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 80;

    tcBuffer[1] =
        (cameraSelect << 0);
    tcBuffer[2] =
        (imageSize << 0);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 3, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendStarConfigCmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 37;

    *( (int16_t*)(tcBuffer + 1) ) = (int16_t) round(starAngle1*100.0);
    *( (int16_t*)(tcBuffer + 3) ) = (int16_t) round(starAngle2*100.0);
    *( (int16_t*)(tcBuffer + 5) ) = (int16_t) round(starAngle3*100.0);
    *( (uint16_t*)(tcBuffer + 7) ) = starExposure;
    *( (uint8_t*)(tcBuffer + 9) ) = detectionThreshold;
    *( (uint8_t*)(tcBuffer + 10) ) = starThreshold;
    *( (uint8_t*)(tcBuffer + 11) ) = maxStarMatched;
    *( (uint8_t*)(tcBuffer + 12) ) = maxStarPixel;
    *( (uint8_t*)(tcBuffer + 13) ) = maxStarNoise;
    *( (uint8_t*)(tcBuffer + 14) ) = minStarPixel;
    *( (uint8_t*)(tcBuffer + 15) ) = (uint8_t) round(starErrorMargin*100.0);
    *( (float*)(tcBuffer + 16) ) = starCentX;
    *( (float*)(tcBuffer + 20) ) = starCentY;
    *( (uint16_t*)(tcBuffer + 24) ) = (uint16_t) round(starFocal*10000.0);
    *( (uint8_t*)(tcBuffer + 26) ) = syncDelay;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 27, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendTorquerCmdCmd(uint8_t nodeid, double torquerX, double torquerY, double torquerZ)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if ((torquerX < -800) || (torquerX > 800))
        return TcInvalidParam;

    if ((torquerY < -800) || (torquerY > 800))
        return TcInvalidParam;

    if ((torquerZ < -800) || (torquerZ > 800))
        return TcInvalidParam;

    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 16;

    *( (int16_t*)(tcBuffer + 1) ) = (int16_t) round(torquerX*1000.0);
    *( (int16_t*)(tcBuffer + 3) ) = (int16_t) round(torquerY*1000.0);
    *( (int16_t*)(tcBuffer + 5) ) = (int16_t) round(torquerZ*1000.0);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 7, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendTrackingParamsCmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 54;

    *( (float*)(tcBuffer + 1) ) = kp3;
    *( (float*)(tcBuffer + 5) ) = kd3;
    *( (float*)(tcBuffer + 9) ) = ki3;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 13, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendTriggerAdcsCmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 18;


    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendTriggerAdcsSensorCmd(uint8_t nodeid, uint32_t unixTime, uint16_t cssRaw1, uint16_t cssRaw2, uint16_t cssRaw3, uint16_t cssRaw4, uint16_t cssRaw5, uint16_t cssRaw6, uint16_t cssRaw7, uint16_t cssRaw8, uint16_t cssRaw9, uint16_t cssRaw10, int16_t cam1RawX, int16_t cam1RawY, uint8_t cam1Busy, uint8_t cam1Result, int16_t cam2RawX, int16_t cam2RawY, uint8_t cam2Busy, uint8_t cam2Result, int16_t magRawX, int16_t magRawY, int16_t magRawZ, int16_t rateRawX, int16_t rateRawY, int16_t rateRawZ, int16_t wheelRawX, int16_t wheelRawY, int16_t wheelRawZ, int16_t star1CameraX, int16_t star1CameraY, int16_t star1CameraZ, int16_t star1InertialX, int16_t star1InertialY, int16_t star1InertialZ, int16_t star2CameraX, int16_t star2CameraY, int16_t star2CameraZ, int16_t star2InertialX, int16_t star2InertialY, int16_t star2InertialZ, int16_t star3CameraX, int16_t star3CameraY, int16_t star3CameraZ, int16_t star3InertialX, int16_t star3InertialY, int16_t star3InertialZ)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 19;

    *( (uint32_t*)(tcBuffer + 1) ) = unixTime;
    *( (uint16_t*)(tcBuffer + 5) ) = cssRaw1;
    *( (uint16_t*)(tcBuffer + 7) ) = cssRaw2;
    *( (uint16_t*)(tcBuffer + 9) ) = cssRaw3;
    *( (uint16_t*)(tcBuffer + 11) ) = cssRaw4;
    *( (uint16_t*)(tcBuffer + 13) ) = cssRaw5;
    *( (uint16_t*)(tcBuffer + 15) ) = cssRaw6;
    *( (uint16_t*)(tcBuffer + 17) ) = cssRaw7;
    *( (uint16_t*)(tcBuffer + 19) ) = cssRaw8;
    *( (uint16_t*)(tcBuffer + 21) ) = cssRaw9;
    *( (uint16_t*)(tcBuffer + 23) ) = cssRaw10;
    *( (int16_t*)(tcBuffer + 25) ) = cam1RawX;
    *( (int16_t*)(tcBuffer + 27) ) = cam1RawY;
    *( (uint8_t*)(tcBuffer + 29) ) = cam1Busy;
    *( (uint8_t*)(tcBuffer + 30) ) = cam1Result;
    *( (int16_t*)(tcBuffer + 31) ) = cam2RawX;
    *( (int16_t*)(tcBuffer + 33) ) = cam2RawY;
    *( (uint8_t*)(tcBuffer + 35) ) = cam2Busy;
    *( (uint8_t*)(tcBuffer + 36) ) = cam2Result;
    *( (int16_t*)(tcBuffer + 37) ) = magRawX;
    *( (int16_t*)(tcBuffer + 39) ) = magRawY;
    *( (int16_t*)(tcBuffer + 41) ) = magRawZ;
    *( (int16_t*)(tcBuffer + 43) ) = rateRawX;
    *( (int16_t*)(tcBuffer + 45) ) = rateRawY;
    *( (int16_t*)(tcBuffer + 47) ) = rateRawZ;
    *( (int16_t*)(tcBuffer + 49) ) = wheelRawX;
    *( (int16_t*)(tcBuffer + 51) ) = wheelRawY;
    *( (int16_t*)(tcBuffer + 53) ) = wheelRawZ;
    *( (int16_t*)(tcBuffer + 55) ) = star1CameraX;
    *( (int16_t*)(tcBuffer + 57) ) = star1CameraY;
    *( (int16_t*)(tcBuffer + 59) ) = star1CameraZ;
    *( (int16_t*)(tcBuffer + 61) ) = star1InertialX;
    *( (int16_t*)(tcBuffer + 63) ) = star1InertialY;
    *( (int16_t*)(tcBuffer + 65) ) = star1InertialZ;
    *( (int16_t*)(tcBuffer + 67) ) = star2CameraX;
    *( (int16_t*)(tcBuffer + 69) ) = star2CameraY;
    *( (int16_t*)(tcBuffer + 71) ) = star2CameraZ;
    *( (int16_t*)(tcBuffer + 73) ) = star2InertialX;
    *( (int16_t*)(tcBuffer + 75) ) = star2InertialY;
    *( (int16_t*)(tcBuffer + 77) ) = star2InertialZ;
    *( (int16_t*)(tcBuffer + 79) ) = star3CameraX;
    *( (int16_t*)(tcBuffer + 81) ) = star3CameraY;
    *( (int16_t*)(tcBuffer + 83) ) = star3CameraZ;
    *( (int16_t*)(tcBuffer + 85) ) = star3InertialX;
    *( (int16_t*)(tcBuffer + 87) ) = star3InertialY;
    *( (int16_t*)(tcBuffer + 89) ) = star3InertialZ;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 91, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendWheelConfigCmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 22;

    tcBuffer[1] =
        (rW1Conf << 0);
    tcBuffer[2] =
        (rW2Conf << 0);
    tcBuffer[3] =
        (rW3Conf << 0);
    tcBuffer[4] =
        (rW4Conf << 0);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 5, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendWheelSpeedCmdCmd(uint8_t nodeid, int16_t wheelX, int16_t wheelY, int16_t wheelZ)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if ((wheelX < -8000) || (wheelX > 8000))
        return TcInvalidParam;

    if ((wheelY < -8000) || (wheelY > 8000))
        return TcInvalidParam;

    if ((wheelZ < -8000) || (wheelZ > 8000))
        return TcInvalidParam;

    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 17;

    *( (int16_t*)(tcBuffer + 1) ) = wheelX;
    *( (int16_t*)(tcBuffer + 3) ) = wheelY;
    *( (int16_t*)(tcBuffer + 5) ) = wheelZ;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 7, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendYWheelParamsCmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 39;

    *( (float*)(tcBuffer + 1) ) = kh;
    *( (float*)(tcBuffer + 5) ) = kn;
    *( (float*)(tcBuffer + 9) ) = kp1;
    *( (float*)(tcBuffer + 13) ) = kd1;
    *( (float*)(tcBuffer + 17) ) = h_ref;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 21, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendAdvanceFileListPtrCmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 113;


    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendDownloadBurstCmd(uint8_t nodeid, uint8_t messageLength, bool ignoreHoleMap)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 119;

    tcBuffer[2] =
        (ignoreHoleMap << 0);
    *( (uint8_t*)(tcBuffer + 1) ) = messageLength;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 3, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendEraseFileCmd(uint8_t nodeid, CUBELIB_CUBEACP_t fileType, uint8_t fileCtr, bool eraseAll)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (((fileType < 0) || (fileType > 8)) &&
       (fileType != 15))
        return TcInvalidParam;

    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 108;

    tcBuffer[1] =
        (fileType << 0);
    tcBuffer[3] =
        (eraseAll << 0);
    *( (uint8_t*)(tcBuffer + 2) ) = fileCtr;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 4, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendFileUploadCmd(uint8_t nodeid, uint16_t packetNo, uint8_t* fileBytes)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 115;

    *( (uint16_t*)(tcBuffer + 1) ) = packetNo;
    memcpy(tcBuffer + 3,fileBytes,20);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 23, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendFinalizeUploadBlockCmd(uint8_t nodeid, CUBELIB_CUBEACP_t destination, uint32_t offset, uint16_t blockLen)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (((destination < 2) || (destination > 17)))
        return TcInvalidParam;

    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 116;

    tcBuffer[1] =
        (destination << 0);
    *( (uint32_t*)(tcBuffer + 2) ) = offset;
    *( (uint16_t*)(tcBuffer + 6) ) = blockLen;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 8, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendHoleMap1Cmd(uint8_t nodeid, uint8_t* holeMap)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 120;

    memcpy(tcBuffer + 1,holeMap,16);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 17, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendHoleMap2Cmd(uint8_t nodeid, uint8_t* holeMap)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 121;

    memcpy(tcBuffer + 1,holeMap,16);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 17, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendHoleMap3Cmd(uint8_t nodeid, uint8_t* holeMap)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 122;

    memcpy(tcBuffer + 1,holeMap,16);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 17, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendHoleMap4Cmd(uint8_t nodeid, uint8_t* holeMap)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 123;

    memcpy(tcBuffer + 1,holeMap,16);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 17, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendHoleMap5Cmd(uint8_t nodeid, uint8_t* holeMap)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 124;

    memcpy(tcBuffer + 1,holeMap,16);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 17, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendHoleMap6Cmd(uint8_t nodeid, uint8_t* holeMap)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 125;

    memcpy(tcBuffer + 1,holeMap,16);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 17, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendHoleMap7Cmd(uint8_t nodeid, uint8_t* holeMap)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 126;

    memcpy(tcBuffer + 1,holeMap,16);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 17, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendHoleMap8Cmd(uint8_t nodeid, uint8_t* holeMap)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 127;

    memcpy(tcBuffer + 1,holeMap,16);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 17, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendInitiateFileUploadCmd(uint8_t nodeid, CUBELIB_CUBEACP_t destination, uint8_t blockSize)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (((destination < 2) || (destination > 17)))
        return TcInvalidParam;

    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 114;

    tcBuffer[1] =
        (destination << 0);
    *( (uint8_t*)(tcBuffer + 2) ) = blockSize;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 3, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendLoadDownloadBlockCmd(uint8_t nodeid, CUBELIB_CUBEACP_t fileType, uint8_t counter, uint32_t offset, uint16_t length)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (((fileType < 0) || (fileType > 8)) &&
       (fileType != 15))
        return TcInvalidParam;

    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 112;

    tcBuffer[1] =
        (fileType << 0);
    *( (uint8_t*)(tcBuffer + 2) ) = counter;
    *( (uint32_t*)(tcBuffer + 3) ) = offset;
    *( (uint16_t*)(tcBuffer + 7) ) = length;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 9, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendResetFileListPtrCmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 118;


    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendResetUploadBlockCmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 117;


    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendConvertCmd(uint8_t nodeid, uint8_t srcFileCtr, uint8_t qualityFactor, uint8_t whiteBalance)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 57;

    *( (uint8_t*)(tcBuffer + 1) ) = srcFileCtr;
    *( (uint8_t*)(tcBuffer + 2) ) = qualityFactor;
    *( (uint8_t*)(tcBuffer + 3) ) = whiteBalance;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 4, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendAdvanceLogPtrCmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 5;


    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendCacheCmd(uint8_t nodeid, bool enabled)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 3;

    tcBuffer[1] =
        (enabled << 0);

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 2, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendResetCmd(uint8_t nodeid, uint8_t magic)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 1;

    *( (uint8_t*)(tcBuffer + 1) ) = magic;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 2, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendResetBootRegistersCmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 6;


    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendResetLogPtrCmd(uint8_t nodeid)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 4;


    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 1, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendSramScrubSettingsCmd(uint8_t nodeid, uint16_t scrubSize)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 8;

    *( (uint16_t*)(tcBuffer + 1) ) = scrubSize;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 3, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendUnixTimeCmd(uint8_t nodeid, uint32_t time, uint16_t milliSec)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 2;

    *( (uint32_t*)(tcBuffer + 1) ) = time;
    *( (uint16_t*)(tcBuffer + 5) ) = milliSec;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 7, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendUnixTimeSaveCmd(uint8_t nodeid, bool saveNow, bool saveOnUpdate, bool savePeriodic, uint8_t period)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 9;

    tcBuffer[1] =
        (saveNow << 0) +
        (saveOnUpdate << 1) +
        (savePeriodic << 2);
    *( (uint8_t*)(tcBuffer + 2) ) = period;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 3, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendLogSdConfig1Cmd(uint8_t nodeid, uint8_t* logSelection, uint16_t period, CUBELIB_CUBEACP_t destination)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (((destination < 0) || (destination > 1)))
        return TcInvalidParam;

    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 104;

    tcBuffer[13] =
        (destination << 0);
    memcpy(tcBuffer + 1,logSelection,10);
    *( (uint16_t*)(tcBuffer + 11) ) = period;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 14, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendLogSdConfig2Cmd(uint8_t nodeid, uint8_t* logSelection, uint16_t period, CUBELIB_CUBEACP_t destination)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    if (((destination < 0) || (destination > 1)))
        return TcInvalidParam;

    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 105;

    tcBuffer[13] =
        (destination << 0);
    memcpy(tcBuffer + 1,logSelection,10);
    *( (uint16_t*)(tcBuffer + 11) ) = period;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 14, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}

CUBELIB_Result_t CUBELIB_SendLogUartConfigCmd(uint8_t nodeid, uint8_t* selection, uint16_t period)
{
    uint8_t* tcBuffer = cubeAcpCommsBuffer;
    I2C_TransferReturn_TypeDef i2cResult;



    // write TtcMessage ID to first element in buffer
    tcBuffer[0] = 106;

    memcpy(tcBuffer + 1,selection,10);
    *( (uint16_t*)(tcBuffer + 11) ) = period;

    i2cResult = BSP_I2C_masterTransmit(BSP_I2C_SUB, uintnodeid, I2C_FLAG_WRITE, tcBuffer, 13, NULL, 0);
    if (i2cResult != i2cTransferDone)
        return i2cResult;

    return CubeLibOk;
}
